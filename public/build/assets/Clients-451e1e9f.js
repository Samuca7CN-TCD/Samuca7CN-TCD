import{P as N,_ as L}from"./AppLayout-1cfe5272.js";import{T as M,o as l,c as b,w as h,a as e,b as p,u as a,i as S,l as v,q as x,e as c,t as u,f as m,n as y,g as k,d as $,F as C,h as T,O as D}from"./app-41e5157c.js";import{P}from"./index-ddd3df00.js";import{_ as B}from"./Modal-5fe21e74.js";import{_ as E}from"./PrimaryButton-6ba0d3d9.js";import{_ as F}from"./SecondaryButton-8b1e2ffe.js";import{_ as U,a as I}from"./Budget-4acbe05b.js";import"./shared_functions-016de35d.js";import"./loadInstallments-43ddaa7b.js";const q={class:"mt-5 mx-5"},z={class:"flex flex-row align-middle items-center space-x-2"},A={class:"bg-blue-100 p-2 rounded-full text-blue-400"},K=e("h2",{class:"text-2xl bold"},"Cadastrar Cliente",-1),W=e("p",{class:"text-xm text-gray-500 mt-3"},"Formulário para cadastro de uma nova tarefa",-1),G=["onSubmit"],H={class:"overflow-hidden border-2 m-5 sm:rounded-md bg-white sm:p-3 flex-col-config divide-y-2"},J={class:"w-full m-0 p-0 space-y-2"},Q={class:"w-full"},R={key:0,class:"text-xs text-red-600 ml-3"},X={class:"w-full"},Y={key:0,class:"text-xs text-red-600 ml-3"},Z={class:"w-full"},ee={key:0,class:"text-xs text-red-600 ml-3"},te={class:"w-full px-4 py-3 space-x-2 text-right sm:px-6 mt-5"},se={__name:"ModalCreateClient",emits:["modal_open"],setup(t,{emit:_}){const s=M({name:null,contact:null,email:null,active:!1}),g=()=>{s.reset(),s.clearErrors(),_("modal_open",!1)},o=()=>{s.post(route("clients.store"),{preserveScroll:!0,onSuccess:()=>g()})};return(w,r)=>(l(),b(B,{show:!0},{default:h(()=>[e("div",q,[e("div",z,[e("span",A,[p(a(P),{class:"w-5 h-5"})]),K]),W]),e("form",{id:"create_task",onSubmit:S(o,["prevent"]),class:"w-full"},[e("div",H,[e("div",J,[e("div",Q,[v(e("input",{type:"text",name:"client_name",id:"client-name",autocomplete:"off",placeholder:"Nome do Cliente",class:"w-full border-none focus:outline-0 sm:text-md","onUpdate:modelValue":r[0]||(r[0]=f=>a(s).name=f)},null,512),[[x,a(s).name]]),a(s).errors.name?(l(),c("div",R,u(a(s).errors.name),1)):m("",!0)]),e("div",X,[v(e("input",{type:"tel",name:"client_contact",id:"client-contact",autocomplete:"off",placeholder:"Whatsapp",class:"w-full border-none focus:outline-0 sm:text-md","onUpdate:modelValue":r[1]||(r[1]=f=>a(s).contact=f),minlength:"8",maxlength:"20"},null,512),[[x,a(s).contact]]),a(s).errors.contact?(l(),c("div",Y,u(a(s).errors.contact),1)):m("",!0)]),e("div",Z,[v(e("input",{type:"email",name:"client_email",id:"client-email",autocomplete:"off",placeholder:"E-mail",class:"w-full border-none focus:outline-0 sm:text-md","onUpdate:modelValue":r[2]||(r[2]=f=>a(s).email=f)},null,512),[[x,a(s).email]]),a(s).errors.email?(l(),c("div",ee,u(a(s).errors.email),1)):m("",!0)])]),e("div",te,[p(F,{type:"button",class:y(["ml-4",{"opacity-25":a(s).processing}]),disabled:a(s).processing,onClick:g},{default:h(()=>[k(" Cancelar ")]),_:1},8,["class","disabled"]),p(E,{class:y(["ml-4",{"opacity-25":a(s).processing}]),disabled:a(s).processing},{default:h(()=>[k(" Cadastrar ")]),_:1},8,["class","disabled"])])])],40,G)]),_:1}))}},le={class:"w-11/12 m-auto px-0 rounded-xl shadow-2xl min-h-[525px] my-10 bg-white select-none overflow-hidden"},oe={key:0,class:"my-5"},ne={key:1,class:"w-full overflow-auto"},ae={class:"w-full m-auto table-fixed overflow-auto"},ie=e("thead",{class:"lg:border-b-2 lg:border-gray-500"},[e("th",{title:"O cliente só é ativo se houver pelo menos uma cerimônia ativa"},"Ativo"),e("th",null,"Nome"),e("th",null,"Contato"),e("th",null,"Email"),e("th",null,"Data de cadastro")],-1),ce=["title","onClick"],re={class:"py-3 px-5 truncate flex flex-col items-center align-middle",title:"O cliente só é ativo se houver pelo menos uma cerimônia ativa"},de={class:"py-3 px-5 truncate"},ue={class:"py-3 px-5 truncate"},me=["href"],_e={class:"py-3 px-5 truncate"},ge=["href"],fe={class:"py-3 px-5 truncate"},be={key:2,class:"w-full text-center my-10"},he={__name:"ClientsList",props:{clients_list:Object},setup(t){const _=t,s=$(!1),g=$(_.clients_list),o=$(""),w=i=>{s.value=i,r()},r=()=>{o.value.length?g.value=_.clients_list.filter(i=>i.name.toLowerCase().indexOf(o.value.toLowerCase())>-1):g.value=_.clients_list},f=()=>{o.value="",r()},O=i=>(i=i.split(/\-|\T|\:/),i[2]+"/"+i[1]+"/"+i[0]+" às "+i[3]+":"+i[4]),V=i=>{D.get(route("clients.show",i))};return(i,d)=>(l(),c(C,null,[e("section",le,[t.clients_list.length?(l(),c("div",oe,[v(e("input",{class:"w-full border-none outline-0",placeholder:"Pesquise o nome do cliente",id:"searchClient",type:"text","onUpdate:modelValue":d[0]||(d[0]=n=>o.value=n),onKeyup:d[1]||(d[1]=n=>r())},null,544),[[x,o.value]]),o.value.length?(l(),c("span",{key:0,class:"text-ms text-gray-500 px-5 hover:text-gray-900 active:text-gray-700 cursor-pointer",onClick:d[2]||(d[2]=n=>f())},"Limpar filtro")):m("",!0)])):m("",!0),t.clients_list.length?(l(),c("div",ne,[e("table",ae,[ie,e("tbody",null,[(l(!0),c(C,null,T(g.value,(n,j)=>(l(),c("tr",{key:n.id,class:y(["lg:border-b-2 lg-border-gray-100 hover:bg-gray-200 active:bg-gray-300 cursor-pointer text-center",{"bg-gray-100":j%2!=0}]),title:"Ver detalhes de "+n.name,onClick:we=>V(n.id)},[e("td",re,[e("div",{class:y(["w-3 h-3 rounded-full",{"bg-green-700":n.active,"bg-red-700":!n.active}])},null,2)]),e("td",de,u(n.name),1),e("td",ue,[e("a",{href:"tel:"+n.contact,target:"_blank"},u(n.contact),9,me)]),e("td",_e,[e("a",{href:"mailto:"+n.email,target:"_blank"},u(n.email),9,ge)]),e("td",fe,u(O(n.created_at)),1)],10,ce))),128))])])])):(l(),c("div",be,"Não há clientes cadastrados!"))]),e("button",{type:"buttom",class:"flex-col-config absolute top-28 right-12 bg-red-600 hover:bg-red-700 active:bg-red-500 text-white rounded-full p-5",onClick:d[3]||(d[3]=n=>s.value=!0)},[p(a(N),{class:"w-5 h-5"})]),s.value?(l(),b(se,{key:0,onModal_open:d[4]||(d[4]=n=>w(n))})):m("",!0)],64))}},pe={key:0,class:"font-semibold text-xl text-gray-800 leading-tight"},ve={key:0,class:"inline"},xe={key:1,class:"inline"},ye={key:1,class:"font-semibold text-xl text-gray-800 leading-tight"},Se={__name:"Clients",props:{submenu:Object,submenu_category:String,activated_page:Number,clients_list:Object,selected_client:Object,client_budgets:Object,budget_selects_options:Object,budget:Object,ceremony:Object},setup(t){const _=t,s=()=>_.budget_selects_options.events.filter(o=>o.id==_.budget.event_id)[0].name,g=o=>(o=o.split(/\-|\T|\:|\ /),o[2]+"/"+o[1]+"/"+o[0]+" às "+o[3]+":"+o[4]);return(o,w)=>(l(),b(L,{title:"Clientes",submenu:t.submenu,activated_page:t.activated_page,submenu_category:t.submenu_category},{header:h(()=>[t.budget?(l(),c("h2",ye," Orçamento - "+u(s()+" ("+g(t.budget.event_date)+")"),1)):(l(),c("h2",pe,[k(" Clientes - "),t.selected_client?(l(),c("span",ve,u(t.selected_client.name),1)):(l(),c("span",xe,"Lista de Clientes"))]))]),default:h(()=>[!t.selected_client&&!t.budget?(l(),b(he,{key:0,clients_list:t.clients_list},null,8,["clients_list"])):m("",!0),t.selected_client&&!t.budget?(l(),b(U,{key:1,client:t.selected_client,budgets_list:t.client_budgets,budget_selects_options:t.budget_selects_options},null,8,["client","budgets_list","budget_selects_options"])):m("",!0),t.budget?(l(),b(I,{key:2,budget:t.budget,ceremony:t.ceremony,budget_selects_options:t.budget_selects_options},null,8,["budget","ceremony","budget_selects_options"])):m("",!0)]),_:1},8,["submenu","activated_page","submenu_category"]))}};export{Se as default};
