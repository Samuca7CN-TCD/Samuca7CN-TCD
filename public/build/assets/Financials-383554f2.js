import{C as J,a as L,X as D,b as G,c as q,P as z,_ as H}from"./AppLayout-1cfe5272.js";import{d as f,T as R,o as r,c as I,w as h,a as e,b as _,u as l,i as P,l as w,q as j,e as c,f as g,s as Q,y as A,F as C,h as N,n as $,t as m,g as k,O as S}from"./app-41e5157c.js";import{P as T}from"./index-ddd3df00.js";import{_ as U}from"./Modal-5fe21e74.js";import{_ as B}from"./PrimaryButton-6ba0d3d9.js";import{_ as F}from"./SecondaryButton-8b1e2ffe.js";import{l as V,_ as W}from"./loadInstallments-43ddaa7b.js";import{t as b,f as E}from"./shared_functions-016de35d.js";const Y={class:"mt-5 mx-5"},Z={class:"flex flex-row align-middle items-center space-x-2"},ee={class:"bg-blue-100 p-2 rounded-full text-blue-400"},te=e("h2",{class:"text-2xl bold"},"Cadastrar Parcelas",-1),se=e("p",{class:"text-xm text-gray-500 mt-3"},"Formulário para cadastro do parcelamento do pagamento da cerimônia",-1),ae=["onSubmit"],le={class:"overflow-hidden m-5 md:m-0 p-5 sm:rounded-md bg-white sm:p-3 flex-col-config divide-y-2"},oe={class:"w-full m-0 p-0 space-y-2"},ne={class:"w-full"},ie=e("label",{for:"installment_name",class:"text-xs text-slate-700"},"Nome das parcelas",-1),de={key:0,class:"w-full"},re=e("label",{for:"installment_payment_day",class:"text-xs text-slate-700"},"Dia de pagamento das parcelas",-1),ue={class:"w-full"},ce=e("label",{for:"installment_payment_option",class:"text-xs text-slate-700"},"Condição de pagamento",-1),me=e("option",{value:"0",disabled:""},"Escolha uma das opções abaixo",-1),_e=e("option",{value:"1"},"20% de entrada + 60% parcelado + 20% duas semanas antes do evento ",-1),pe=e("option",{value:"2"},"50% entrada + 50% uma mês antes do evento",-1),ve=e("option",{value:"3"},"100% pix com 5% de desconto",-1),xe=e("option",{value:"4"},"Dividir valor total igualmente",-1),ye=[me,_e,pe,ve,xe],ge={key:1,class:"w-full py-3 flex flex-col"},fe=e("label",{class:"text-xs text-slate-700"},"Tipo de mensalidade",-1),be={class:"flex flex-row space-x-2 align-middle items-center"},he=e("label",{for:"mensal_input",class:"ml-2"},"Mensal",-1),$e={class:"flex flex-row space-x-2 align-middle items-center"},we=e("label",{for:"trimestral_input",class:"ml-2"},"Trimestral",-1),ke={class:"mt-10 overflow-auto"},Ce={class:"w-full m-auto table-auto truncate"},Oe=e("thead",{class:"lg:border-b-2 lg:border-gray-500"},[e("th",null,"ID"),e("th",null,"Nome"),e("th",null,"Valor"),e("th",null,"Prazo")],-1),Se={class:"py-3 px-5 truncate"},je={class:"py-3 px-5 truncate"},Me={class:"py-3 px-5 truncate"},Ve={class:"py-3 px-5 truncate"},Ie={class:"w-full px-4 py-3 sm:px-6 mt-5 text-right"},Ee={__name:"ModalCreateInstallments",props:{ceremony:Object,budget:Object},emits:["modal_open"],setup(s,{emit:n}){const o=s,t=f({name:"Parcela",payment_day:10,type:0,payment_option:1}),d=f(V(t.value,o.budget.budget_total_value,o.budget.event_date)),p=R({id:d.value[d.value.length]+1,name:"Parcela",type:0,paid_amount:0,paid:0,total_amount:0,deadline:new Date().toISOString().slice(0,19).replace("","T"),entry:!1,vouchers:[]}),v=()=>{t.value.name="",t.value.payment_option=1,n("modal_open",!1)},x=()=>{S.put(route("ceremonies.update",o.ceremony.id),{installment_list:d.value},{preserveScroll:!0,onSuccess:()=>v()})};return(y,i)=>(r(),I(U,{show:!0},{default:h(()=>[e("div",Y,[e("div",Z,[e("span",ee,[_(l(T),{class:"w-5 h-5"})]),te]),se]),e("form",{id:"create_task",onSubmit:P(x,["prevent"]),class:"w-full"},[e("div",le,[e("div",oe,[e("div",ne,[ie,w(e("input",{type:"text",id:"installment_name",placeholder:"Ex: Primeiro parcelamento","onUpdate:modelValue":i[0]||(i[0]=a=>t.value.name=a),onKeyup:i[1]||(i[1]=a=>d.value=l(V)(t.value,s.ceremony.total_negotiated_amount,s.budget.event_date)),class:"w-full border-slate-300 sm:text-md"},null,544),[[j,t.value.name]])]),t.value.payment_option==1||t.value.payment_option==4?(r(),c("div",de,[re,w(e("input",{type:"number",step:"1",min:"1",max:"28",id:"installment_payment_day",placeholder:"Ex: Todo dia 10 (Dia máximo: 28)","onUpdate:modelValue":i[2]||(i[2]=a=>t.value.payment_day=a),onKeyup:i[3]||(i[3]=a=>d.value=l(V)(t.value,s.ceremony.total_negotiated_amount,s.budget.event_date)),class:"w-full border-slate-300 sm:text-md"},null,544),[[j,t.value.payment_day]])])):g("",!0),e("div",ue,[ce,w(e("select",{id:"installment_payment_option",class:"w-full border-slate-300 sm:text-md","onUpdate:modelValue":i[4]||(i[4]=a=>t.value.payment_option=a),onChange:i[5]||(i[5]=a=>d.value=l(V)(t.value,s.ceremony.total_negotiated_amount,s.budget.event_date))},ye,544),[[Q,t.value.payment_option]])]),t.value.payment_option==1?(r(),c("div",ge,[fe,e("span",be,[w(e("input",{id:"mensal_input",type:"radio",class:"form-radio text-stone-500",value:"0",name:"installment_type","onUpdate:modelValue":i[6]||(i[6]=a=>t.value.type=a),onChange:i[7]||(i[7]=a=>d.value=l(V)(t.value,s.ceremony.total_negotiated_amount,s.budget.event_date))},null,544),[[A,t.value.type]]),he]),e("span",$e,[w(e("input",{id:"trimestral_input",type:"radio",class:"form-radio text-stone-500",value:"1",name:"installment_type","onUpdate:modelValue":i[8]||(i[8]=a=>t.value.type=a),onChange:i[9]||(i[9]=a=>d.value=l(V)(t.value,s.ceremony.total_negotiated_amount,s.budget.event_date))},null,544),[[A,t.value.type]]),we])])):g("",!0),e("div",ke,[e("table",Ce,[Oe,e("tbody",null,[(r(!0),c(C,null,N(d.value,(a,u)=>(r(),c("tr",{key:a.id,class:$(["lg:border-b-2 lg-border-gray-100 hover:bg-gray-200 text-center",{"bg-gray-100":u%2!=0}])},[e("td",Se,"#"+m(a.id),1),e("td",je,m(a.name)+" "+m(a.paid?"(pago)":""),1),e("td",Me,m(l(b)(a.total_amount)),1),e("td",Ve,m(a.deadline.split(" ")[0]),1)],2))),128))])])])]),e("div",Ie,[_(F,{type:"button",class:$(["ml-4",{"opacity-25":l(p).processing}]),disabled:l(p).processing,onClick:v},{default:h(()=>[k(" Cancelar ")]),_:1},8,["class","disabled"]),_(B,{class:$(["ml-4",{"opacity-25":l(p).processing}]),disabled:l(p).processing},{default:h(()=>[k(" Cadastrar ")]),_:1},8,["class","disabled"])])])],40,ae)]),_:1}))}},Ne={class:"mt-5 mx-5"},Pe={class:"flex flex-row align-middle items-center space-x-2"},Ue={class:"p-2 rounded-full"},Fe={class:"text-2xl bold"},De={class:"text-xs"},Re={class:"overflow-hidden m-5 md:m-0 p-5 sm:rounded-md bg-white sm:p-3 flex-col-config divide-y-2"},Te={class:"overflow-hidden bg-white shadow sm:rounded-lg"},Be=e("div",{class:"px-4 py-5 sm:px-6"},[e("h3",{class:"text-base font-semibold leading-6 text-gray-900"},"Informações da Parcela")],-1),Ae={class:"border-t border-gray-200"},Je={class:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},qe=e("dt",{class:"text-sm font-medium text-gray-500"},"Valor total da parcela",-1),ze={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},Ke={class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},Xe=e("dt",{class:"text-sm font-medium text-gray-500"},"Valor pago",-1),Le={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},Ge={class:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},He=e("dt",{class:"text-sm font-medium text-gray-500"},"Valor restante",-1),Qe={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},We={class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},Ye=e("dt",{class:"text-sm font-medium text-gray-500"},"Prazo de Pagamento",-1),Ze={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},et={class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},tt=e("dt",{class:"text-sm font-medium text-gray-500"},"Pagamento e Comprovantes",-1),st={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},at={role:"list",class:"divide-y divide-gray-200 rounded-md border border-gray-200"},lt={class:"flex w-0 flex-1 items-center"},ot={class:"ml-2 w-0 flex-1 truncate text-gray-500"},nt={class:"ml-2 w-0 flex-1"},it={class:"ml-4 flex-shrink-0"},dt=["href"],rt={key:0,class:"flex items-center justify-between py-3 pl-3 pr-4 text-sm"},ut={class:"flex w-0 flex-1 items-center"},ct={class:"ml-2 flex-1 space-y-2 w-full"},mt={class:"w-full"},_t=e("label",{for:"payment_amount",class:"text-gray-400"},"Valor de pagamento (R$)",-1),pt=["max"],vt={class:"flex flex-row items-center align-middle space-x-3"},xt={for:"voucher",class:"flex-col-config p-2 w-fit bg-blue-500 rounded-xl cursor-pointer",title:"Inserir comprovante"},yt={class:"w-full flex-wrap"},gt={class:"ml-4 flex-shrink-0"},ft={class:"w-full px-4 py-3 sm:px-6 mt-5 text-right"},bt={__name:"ModalManageInstallment",props:{ceremony:Object,installment:Object,installments:Object},emits:["modal_open"],setup(s,{emit:n}){const o=s,t=f({id:o.installment.id,name:o.installment.name,paid_amount:o.installment.paid_amount,paid:o.installment.paid,total_amount:o.installment.total_amount,deadline:o.installment.deadline,entry:o.installment.entry,vouchers:o.installment.vouchers,processing:!1}),d=f({id:t.value.vouchers.length?t.value.vouchers[t.value.vouchers.length-1].id+1:0,installment_id:t.value.id,name:null,value:t.value.total_amount-t.value.paid_amount,file:null}),p=()=>{if(t.value.paid||d.value.value>t.value.total_amount-t.value.paid_amount){alert("Você não pode pagar mais do que o valor restante!");return}if(!d.value.value||d.value.value<0){alert("Insira um valor entre R$ 0,00 e "+b(t.value.total_amount-t.value.paid_amount));return}if(!d.value.file){alert("O upload do comprovante é obrigatório!");return}d.value.id=t.value.vouchers.length,t.value.processing=!0,S.post(route("ceremonies.update.voucher",o.ceremony.id),d.value,{preserveScroll:!0,onSuccess:()=>x()})},v=i=>{t.value.processing=!0,console.log(t.value.vouchers),t.value.vouchers.length==null&&(t.value.vouchers=Object.values(t.value.vouchers)),console.log(t.value.vouchers);const a=t.value.vouchers.find(u=>u.id==i);if(console.log(t.value.vouchers),!a){alert("Comprovante não encontrado!");return}S.put(route("ceremonies.delete.voucher",o.ceremony.id),a,{preserveScroll:!0,onSuccess:()=>x()})},x=()=>{const i=o.installments.find(a=>a.id==t.value.id);t.value.paid_amount=i.paid_amount,t.value.paid=i.paid,t.value.total_amount=i.total_amount,t.value.vouchers=i.vouchers,d.value.name=null,d.value.value=i.total_amount-i.paid_amount,d.value.file=null,t.value.processing=!1},y=()=>{S.get(route("financials.index",o.ceremony.id),{preserveScroll:!0})};return(i,a)=>(r(),I(U,{show:!0},{default:h(()=>[e("div",Ne,[e("div",Pe,[e("span",Ue,[_(l(J),{class:$(["w-6 h-6 text-gray-500",{"text-green-500":t.value.paid}])},null,8,["class"])]),e("h2",Fe,[k(m(t.value.name)+" ",1),e("p",De,m(t.value.entry?" (Entrada)":""),1)])])]),e("form",{id:"create_task",onSubmit:a[3]||(a[3]=P((...u)=>i.submit&&i.submit(...u),["prevent"])),class:"w-full"},[e("div",Re,[e("div",Te,[Be,e("div",Ae,[e("dl",null,[e("div",Je,[qe,e("dd",ze,m(l(b)(t.value.total_amount)),1)]),e("div",Ke,[Xe,e("dd",Le,m(l(b)(t.value.paid_amount)),1)]),e("div",Ge,[He,e("dd",Qe,m(l(b)(t.value.total_amount-t.value.paid_amount)),1)]),e("div",We,[Ye,e("dd",Ze,m(l(E)(t.value.deadline)),1)]),e("div",et,[tt,e("dd",st,[e("ul",at,[(r(!0),c(C,null,N(t.value.vouchers,u=>(r(),c("li",{key:u.id,class:"flex items-center justify-between py-3 pl-3 pr-4 text-sm group"},[e("div",lt,[_(l(L),{class:"h-5 w-5 flex-shrink-0 text-gray-400 group-hover:hidden","aria-hidden":"true"}),_(l(D),{class:"h-5 w-5 flex-shrink-0 text-gray-400 hidden group-hover:inline-flex cursor-pointer",title:"Excluir pagamento","aria-hidden":"true",onClick:O=>v(u.id)},null,8,["onClick"]),e("span",ot,m(u.name),1),e("span",nt,m(l(b)(parseFloat(u.value))),1)]),e("div",it,[e("a",{href:u.file,target:"_blank",class:"font-medium text-indigo-600 hover:text-indigo-500"},"Baixar",8,dt)])]))),128)),t.value.paid?g("",!0):(r(),c("li",rt,[e("div",ut,[e("div",ct,[e("div",mt,[_t,w(e("input",{id:"payment_amount",type:"number",step:"0.01",min:"0.00",max:t.value.total_amount-t.value.paid_amount,class:"w-full border-gray-300","onUpdate:modelValue":a[0]||(a[0]=u=>d.value.value=u),placeholder:"Valor"},null,8,pt),[[j,d.value.value]])]),e("div",vt,[e("label",xt,[_(l(G),{class:"w-6 h-6 text-white"})]),e("span",yt,m(d.value.name!=null?d.value.name:"Insira o comprovante (obrigatório)"),1),e("input",{id:"voucher",onInput:a[1]||(a[1]=u=>{d.value.name=u.target.files[0].name,d.value.file=u.target.files[0]}),type:"file",accept:".pdf",class:"hidden"},null,32)])])]),e("div",gt,[e("p",{class:"font-medium text-indigo-600 hover:text-indigo-500 cursor-pointer",onClick:a[2]||(a[2]=u=>p())}," Adicionar")])]))])])])])])]),e("div",ft,[_(F,{type:"button",class:$(["ml-4",{"opacity-25":t.value.processing}]),disabled:t.value.processing,onClick:y},{default:h(()=>[k(" Fechar ")]),_:1},8,["class","disabled"])])])],32)]),_:1}))}},ht={class:"mt-5 mx-5"},$t={class:"flex flex-row align-middle items-center space-x-2"},wt={class:"bg-blue-100 p-2 rounded-full text-blue-400"},kt=e("h2",{class:"text-2xl bold"},"Cadastrar Parcelas",-1),Ct=e("p",{class:"text-xm text-gray-500 mt-3"},"Formulário para cadastro do parcelamento do pagamento da cerimônia",-1),Ot=["onSubmit"],St={class:"overflow-hidden m-5 md:m-0 p-5 sm:rounded-md bg-white sm:p-3 flex-col-config divide-y-2"},jt={class:"w-full m-0 p-0 space-y-2"},Mt={class:"w-full"},Vt=e("label",{for:"form_name",class:"text-xs text-slate-700"},"Nome",-1),It={class:"w-full"},Et=e("label",{for:"form_amount",class:"text-xs text-slate-700"},"Valor (R$)",-1),Nt={class:"w-full px-4 py-3 sm:px-6 mt-5 text-right"},Pt={__name:"ModalManageAdditions",props:{ceremony:Object,budget:Object,first_installment:Object,addition:Object,op_type:Number},emits:["modal_open"],setup(s,{emit:n}){const o=s,t=R({name:o.addition.name,amount:o.addition.amount,op_type:o.op_type}),d=[1,1,2,3,4];f({config:o.first_installment?{name:o.first_installment.name||null,payment_day:parseInt(E(o.first_installment.deadline).split("/")[0])||null,type:o.first_installment.type||null,payment_option:d[o.first_installment.type]||null}:null,total_value:o.ceremony.total_negotiated_amount+o.ceremony.total_additions,event_date:o.budget.event_date});const p=()=>{t.reset(),n("modal_open",!1)},v=()=>{t.put(route("ceremonies.update.addition",o.ceremony.id),{preserveScroll:!0,onSuccess:()=>p()})};return(x,y)=>(r(),c(C,null,[k(m(s.addition)+" ",1),_(U,{show:!0},{default:h(()=>[e("div",ht,[e("div",$t,[e("span",wt,[_(l(T),{class:"w-5 h-5"})]),kt]),Ct]),e("form",{id:"create_task",onSubmit:P(v,["prevent"]),class:"w-full"},[e("div",St,[e("div",jt,[e("div",Mt,[Vt,w(e("input",{type:"text",id:"form_name",placeholder:"Ex: Mais uma mesa de buffet","onUpdate:modelValue":y[0]||(y[0]=i=>l(t).name=i),class:"w-full border-slate-300 sm:text-md",autofocus:"true"},null,512),[[j,l(t).name]])]),e("div",It,[Et,w(e("input",{type:"number",step:"0.01",min:"0",id:"form_amount",placeholder:"Ex: R$ 123,45","onUpdate:modelValue":y[1]||(y[1]=i=>l(t).amount=i),class:"w-full border-slate-300 sm:text-md"},null,512),[[j,l(t).amount]])]),e("div",Nt,[_(F,{type:"button",class:$(["ml-4",{"opacity-25":l(t).processing}]),disabled:l(t).processing,onClick:p},{default:h(()=>[k(" Cancelar ")]),_:1},8,["class","disabled"]),_(B,{class:$(["ml-4",{"opacity-25":l(t).processing}]),disabled:l(t).processing},{default:h(()=>[k(" Cadastrar ")]),_:1},8,["class","disabled"])])])])],40,Ot)]),_:1})],64))}},Ut={class:"flex-col-config mb-5 bg-stone-100 py-5 font-mono text-green-700"},Ft=e("p",{class:"text-4xl"},"Adições",-1),Dt={class:"text-xl"},Rt={key:0,class:"mt-10 overflow-auto"},Tt={class:"w-full m-auto table-auto truncate"},Bt={class:"lg:border-b-2 lg:border-gray-500"},At=e("th",null,"Nome",-1),Jt=e("th",null,"Valor",-1),qt={key:0},zt={key:1},Kt=["title"],Xt={class:"py-3 px-5 truncate"},Lt=["title","onClick"],Gt=["title","onClick"],Ht={key:1,class:"w-full text-center"},Qt=e("p",null,"Não há adições cadastradas no momento!",-1),Wt=[Qt],Yt=e("span",null,"Cadastrar adição",-1),Zt={__name:"FinancialAdditions",props:{ceremony:Object,budget:Object,first_installment:Object,additions:Object},setup(s){const n=s,o=f(!1),t=f({name:"",amount:0}),d=f(0),p=[1,1,2,3,4],v=f({config:n.first_installment?{name:n.first_installment.name||null,payment_day:parseInt(E(n.first_installment.deadline).split("/")[0])||null,type:n.first_installment.type||null,payment_option:p[n.first_installment.type]||null}:null,total_value:n.ceremony.total_negotiated_amount+n.ceremony.total_additions,event_date:n.budget.event_date}),x=a=>{v.value.config=n.first_installment?{name:n.first_installment.name||null,payment_day:parseInt(E(n.first_installment.deadline).split("/")[0])||null,type:n.first_installment.type||null,payment_option:p[n.first_installment.type]||null}:null,v.value.total_value=n.ceremony.total_negotiated_amount+n.ceremony.total_additions,v.value.event_date=n.budget.event_date,a?(t.value.name=a,t.value.amount=n.additions[a],d.value=1):(t.value.name="",t.value.amount=0,d.value=0),o.value=!0},y=a=>{d.value=2,S.put(route("ceremonies.update.addition",n.ceremony.id),{name:a,amount:n.additions[a],op_type:d.value},{preserveScroll:!0,onSuccess:()=>setTimeout(i(),500)})},i=()=>{if(v.value.config==null)return;v.value.config={name:n.first_installment.name||null,payment_day:parseInt(E(n.first_installment.deadline).split("/")[0])||null,type:n.first_installment.type||null,payment_option:p[n.first_installment.type]||null},v.value.total_value=n.ceremony.total_negotiated_amount+n.ceremony.total_additions,v.value.event_date=n.budget.event_date;const a=V(v.value.config,v.value.total_value,v.value.event_date);S.put(route("ceremonies.update",n.ceremony.id),{installment_list:a},{preserveScroll:!0})};return(a,u)=>(r(),c(C,null,[e("div",Ut,[Ft,e("p",Dt,m(l(b)(s.ceremony.total_additions)),1)]),Object.values(s.additions).length?(r(),c("div",Rt,[e("table",Tt,[e("thead",Bt,[At,Jt,s.budget.status==2?(r(),c("th",qt,"Editar")):g("",!0),s.budget.status==2?(r(),c("th",zt,"Excluir")):g("",!0)]),e("tbody",null,[(r(!0),c(C,null,N(s.additions,(O,M,K=0)=>(r(),c("tr",{key:M,class:$(["lg:border-b-2 lg-border-gray-100 hover:bg-gray-200 text-center",{"bg-gray-100":K++%2==0}])},[e("td",{class:"py-3 px-5 truncate",title:M},m(M),9,Kt),e("td",Xt,m(l(b)(O)),1),s.budget.status==2?(r(),c("td",{key:0,class:"py-3 px-5 cursor-pointer",title:"Editar "+M,onClick:X=>x(M)},[_(l(q),{class:"w-full h-6 text-stone-500"})],8,Lt)):g("",!0),s.budget.status==2?(r(),c("td",{key:1,class:"py-3 px-5 cursor-pointer",title:"Excluir "+M,onClick:X=>y(M)},[_(l(D),{class:"w-full h-6 text-stone-500"})],8,Gt)):g("",!0)],2))),128))])])])):(r(),c("div",Ht,Wt)),s.budget.status==2?(r(),c("p",{key:2,class:"text-blue-400 hover:text-blue-600 active:text-blue-800 cursor-pointer flex-row-config space-x-1 py-5",onClick:u[0]||(u[0]=O=>x(null))},[_(l(z),{class:"w-4 h-4"}),Yt])):g("",!0),o.value?(r(),I(Pt,{key:3,ceremony:s.ceremony,budget:s.budget,first_installment:s.first_installment,addition:t.value,op_type:d.value,onModal_open:u[1]||(u[1]=O=>o.value=O)},null,8,["ceremony","budget","first_installment","addition","op_type"])):g("",!0)],64))}},es={class:"mt-5 mx-5"},ts={class:"flex flex-row align-middle items-center space-x-2"},ss={class:"bg-blue-100 p-2 rounded-full text-blue-400"},as=e("h2",{class:"text-2xl bold"},"Cadastrar Parcelas",-1),ls=e("p",{class:"text-xm text-gray-500 mt-3"},"Formulário para cadastro do parcelamento do pagamento da cerimônia",-1),os=["onSubmit"],ns={class:"overflow-hidden m-5 md:m-0 p-5 sm:rounded-md bg-white sm:p-3 flex-col-config divide-y-2"},is={class:"w-full m-0 p-0 space-y-2"},ds={class:"w-full"},rs=e("label",{for:"form_name",class:"text-xs text-slate-700"},"Nome",-1),us={class:"w-full"},cs=e("label",{for:"form_amount",class:"text-xs text-slate-700"},"Valor (R$)",-1),ms={class:"w-full px-4 py-3 sm:px-6 mt-5 text-right"},_s={__name:"ModalManageExpenses",props:{ceremony_id:Number,expense:Object,op_type:Number},emits:["modal_open"],setup(s,{emit:n}){const o=s,t=R({name:o.expense.name,amount:o.expense.amount,op_type:o.op_type}),d=()=>{t.reset(),n("modal_open",!1)},p=()=>{t.put(route("ceremonies.update.expense",o.ceremony_id),{preserveScroll:!0,onSuccess:()=>d()})};return(v,x)=>(r(),c(C,null,[k(m(s.expense)+" ",1),_(U,{show:!0},{default:h(()=>[e("div",es,[e("div",ts,[e("span",ss,[_(l(T),{class:"w-5 h-5"})]),as]),ls]),e("form",{id:"create_task",onSubmit:P(p,["prevent"]),class:"w-full"},[e("div",ns,[e("div",is,[e("div",ds,[rs,w(e("input",{type:"text",id:"form_name",placeholder:"Ex: Mais uma mesa de buffet","onUpdate:modelValue":x[0]||(x[0]=y=>l(t).name=y),class:"w-full border-slate-300 sm:text-md",autofocus:"true"},null,512),[[j,l(t).name]])]),e("div",us,[cs,w(e("input",{type:"number",step:"0.01",min:"0",id:"form_amount",placeholder:"Ex: R$ 123,45","onUpdate:modelValue":x[1]||(x[1]=y=>l(t).amount=y),class:"w-full border-slate-300 sm:text-md"},null,512),[[j,l(t).amount]])]),e("div",ms,[_(F,{type:"button",class:$(["ml-4",{"opacity-25":l(t).processing}]),disabled:l(t).processing,onClick:d},{default:h(()=>[k(" Cancelar ")]),_:1},8,["class","disabled"]),_(B,{class:$(["ml-4",{"opacity-25":l(t).processing}]),disabled:l(t).processing},{default:h(()=>[k(" Cadastrar ")]),_:1},8,["class","disabled"])])])])],40,os)]),_:1})],64))}},ps={class:"flex-col-config mb-5 bg-stone-100 py-5 font-mono text-red-700"},vs=e("p",{class:"text-4xl"},"Despesas",-1),xs={class:"text-xl"},ys={key:0,class:"mt-10 overflow-auto"},gs={class:"w-full m-auto table-auto truncate"},fs={class:"lg:border-b-2 lg:border-gray-500"},bs=e("th",null,"Nome",-1),hs=e("th",null,"Valor",-1),$s={key:0},ws={key:1},ks=["title"],Cs={class:"py-3 px-5 truncate"},Os=["title","onClick"],Ss=["title","onClick"],js={key:1,class:"w-full text-center"},Ms=e("p",null,"Não há despesas cadastradas no momento!",-1),Vs=[Ms],Is=e("span",null,"Cadastrar despesa",-1),Es={__name:"FinancialExpenses",props:{ceremony:Object,budget:Object,expenses:Object},setup(s){const n=s,o=f(!1),t=f({name:"",amount:0}),d=f(0),p=x=>{x?(t.value.name=x,t.value.amount=n.expenses[x],d.value=1):(t.value.name="",t.value.amount=0,d.value=0),o.value=!0},v=x=>{d.value=2,S.put(route("ceremonies.update.expense",n.ceremony.id),{name:x,amount:n.expenses[x],op_type:d.value},{preserveScroll:!0})};return(x,y)=>(r(),c(C,null,[e("div",ps,[vs,e("p",xs,m(l(b)(s.ceremony.total_expenses)),1)]),Object.values(s.expenses).length?(r(),c("div",ys,[e("table",gs,[e("thead",fs,[bs,hs,s.budget.status==1||s.budget.status==2?(r(),c("th",$s,"Editar")):g("",!0),s.budget.status==1||s.budget.status==2?(r(),c("th",ws,"Excluir")):g("",!0)]),e("tbody",null,[(r(!0),c(C,null,N(s.expenses,(i,a,u=0)=>(r(),c("tr",{key:a,class:$(["lg:border-b-2 lg-border-gray-100 hover:bg-gray-200 text-center",{"bg-gray-100":u++%2==0}])},[e("td",{class:"py-3 px-5 truncate",title:a},m(a),9,ks),e("td",Cs,m(l(b)(i)),1),s.budget.status==1||s.budget.status==2?(r(),c("td",{key:0,class:"py-3 px-5 cursor-pointer",title:"Editar "+a,onClick:O=>p(a)},[_(l(q),{class:"w-full h-6 text-stone-500"})],8,Os)):g("",!0),s.budget.status==1||s.budget.status==2?(r(),c("td",{key:1,class:"py-3 px-5 cursor-pointer",title:"Excluir "+a,onClick:O=>v(a)},[_(l(D),{class:"w-full h-6 text-stone-500"})],8,Ss)):g("",!0)],2))),128))])])])):(r(),c("div",js,Vs)),s.budget.status==1&&s.budget.status==2?(r(),c("p",{key:2,class:"text-blue-400 hover:text-blue-600 active:text-blue-800 cursor-pointer flex-row-config space-x-1 py-5",onClick:y[0]||(y[0]=i=>p(null))},[_(l(z),{class:"w-4 h-4"}),Is])):g("",!0),o.value?(r(),I(_s,{key:3,ceremony_id:s.ceremony.id,expense:t.value,op_type:d.value,onModal_open:y[1]||(y[1]=i=>o.value=i)},null,8,["ceremony_id","expense","op_type"])):g("",!0)],64))}},Ns={class:"w-11/12 m-auto px-0 rounded-xl shadow-2xl min-h-[525px] my-10 bg-white select-none overflow-hidden"},Ps={class:"w-full min-h-[10px] bg-gray-900"},Us={class:"w-full bg-stone-700 text-white flex-row-config space-x-5 text-2xl py-5"},Fs=e("p",null,"Excedente:",-1),Ds={class:"inline-flex"},Rs={class:"m-5 rounded-md border-2 border-stone-100"},Ts={class:"flex-col-config mb-5 bg-stone-100 py-5 font-mono text-yellow-700"},Bs=e("p",{class:"text-4xl"},"Parcelas",-1),As={class:"text-xl"},Js={key:0,class:"text-center"},qs={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 m-5"},zs=["onClick"],Ks={class:"p-2 w-full flex flex-col space-y-2"},Xs={class:"text-xl text-gray-900"},Ls={class:"text-xs text-gray-700"},Gs={class:"text-lg text-gray-900"},Hs={class:"text-sm text-gray-500"},Qs={key:0,class:"text-xs text-gray-400"},Ws={key:2,class:"w-full flex-row-config"},Ys={class:"mx-10"},Zs=e("label",{for:"obs",class:"text-xs text-slate-700"},"Observações",-1),ea=["rows"],ta={class:"m-5 rounded-md border-2 border-stone-100"},sa={class:"m-5 rounded-md border-2 border-stone-100"},aa={__name:"Financial",props:{ceremony:Object,budget:Object,installments:Object,additions:Object,expenses:Object},setup(s){const n=s,o=f(!1),t=f(!1),d=f({}),p=f(n.ceremony.observations||""),v=f(p.value.split(`
`).length||1);f(n.installments[1]||n.installments[0]||null);const x=i=>{n.budget.status==1&&(d.value=JSON.parse(n.ceremony.installments).filter(a=>a.id==i)[0],t.value=!0)},y=()=>{v.value=p.value.split(`
`).length||1,S.put(route("ceremonies.updade.obs",n.ceremony.id),{obs:p.value},{preserveScroll:!0})};return(i,a)=>(r(),c("section",Ns,[e("div",Ps,[_(W,{ceremony:s.ceremony,budget:s.budget,button_type:1},null,8,["ceremony","budget"])]),e("div",Us,[Fs,e("span",Ds,m(l(b)(s.ceremony.total_negotiated_amount+s.ceremony.total_additions-s.ceremony.total_expenses)),1)]),e("div",Rs,[e("div",Ts,[Bs,e("p",As,m(l(b)(s.ceremony.total_installments)),1)]),s.installments.length?(r(),c("div",qs,[(r(!0),c(C,null,N(JSON.parse(s.ceremony.installments),u=>(r(),c("div",{key:u.id,class:$(["bg-white border-2 group overflow-hidden border-gray-200 rounded-xl flex flex-row space-x-5 px-5 items-center align-middle",{"cursor-pointer hover:shadow-2xl active:shadow-none":s.budget.status==1}]),title:"Opções da Parcela",onClick:O=>x(u.id)},[_(l(J),{class:$(["w-10 h-10",{"text-green-500":u.paid,"text-gray-500":!u.paid}])},null,8,["class"]),e("div",Ks,[e("p",Xs,m(u.name),1),e("div",null,[e("p",Ls,"Restante: "+m(l(b)(u.total_amount-u.paid_amount)),1),e("p",Gs,m(l(b)(u.total_amount)),1)]),e("div",null,[e("p",Hs,m(l(E)(u.deadline).split(" ")[0]),1),u.entry?(r(),c("p",Qs,"Entrada")):g("",!0)])])],10,zs))),128))])):(r(),c("div",Js,"Não há parcelas cadastradas no momento")),s.budget.status==2?(r(),c("div",Ws,[e("button",{class:"p-3 rounded-lg my-2 bg-stone-900 text-white text-lg",onClick:a[0]||(a[0]=u=>o.value=!0)},"Cadastrar parcelas")])):g("",!0)]),e("div",Ys,[Zs,w(e("textarea",{id:"obs",rows:v.value,"onUpdate:modelValue":a[1]||(a[1]=u=>p.value=u),placeholder:"Observações sobre a Cerimônia",class:"w-full border-slate-300 sm:text-md",onInput:y,autofocus:"true"},null,40,ea),[[j,p.value]])]),e("div",ta,[_(Zt,{ceremony:s.ceremony,budget:s.budget,first_installment:s.installments[1]||s.installments[0]||null,additions:s.additions},null,8,["ceremony","budget","first_installment","additions"])]),e("div",sa,[_(Es,{ceremony:s.ceremony,budget:s.budget,expenses:s.expenses},null,8,["ceremony","budget","expenses"])]),o.value?(r(),I(Ee,{key:0,ceremony:s.ceremony,budget:s.budget,onModal_open:a[2]||(a[2]=u=>o.value=u)},null,8,["ceremony","budget"])):g("",!0),t.value?(r(),I(bt,{key:1,ceremony:s.ceremony,installments:s.installments,installment:d.value,onModal_open:a[3]||(a[3]=u=>t.value=u)},null,8,["ceremony","installments","installment"])):g("",!0)]))}},la=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Orçamentos ",-1),_a={__name:"Financials",props:{submenu:Object,submenu_category:String,activated_page:Number,selected_client:Object,budget_list:Object,budget_selects_options:Object,budget:Object,ceremony:Object},setup(s){return(n,o)=>(r(),I(H,{title:"Clientes",submenu:s.submenu,activated_page:s.activated_page,submenu_category:s.submenu_category},{header:h(()=>[la]),default:h(()=>[_(aa,{budget:s.budget,ceremony:s.ceremony,installments:JSON.parse(s.ceremony.installments),additions:JSON.parse(s.ceremony.additions),expenses:JSON.parse(s.ceremony.expenses)},null,8,["budget","ceremony","installments","additions","expenses"])]),_:1},8,["submenu","activated_page","submenu_category"]))}};export{_a as default};
