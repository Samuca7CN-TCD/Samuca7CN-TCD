import{C as z,a as W,X as A,b as Z,B as ee,c as H,P as J,_ as te}from"./AppLayout-8f562265.js";import{d as b,T as q,o as n,c as D,w as k,a as e,b as x,u as a,i as F,l as C,q as j,e as u,f as y,s as se,z as G,F as M,h as P,n as $,t as p,g as S,O as E,y as Q}from"./app-92fc4aab.js";import{P as Y}from"./index-58d6e29b.js";import{_ as N}from"./Modal-9764d4a9.js";import{_ as K}from"./PrimaryButton-0c8141e3.js";import{_ as T}from"./SecondaryButton-a70fa1cd.js";import{t as f,f as R}from"./shared_functions-016de35d.js";import{_ as ae,a as le}from"./BudgetStatusButton-6c6c175d.js";function I(t,h,l){let s=[];const m=parseFloat(h),r=new Date,v=new Date(l),g=t.payment_day;let _=0,i=0,o=0;const c=parseInt(t.payment_option);let d=0;switch(c){case 1:_=m*.2,i=m*.2,o=m*.6,d=0;break;case 2:_=m*.5,i=m*.5,d=2;break;case 3:_=m-m*.05,d=3;break;case 4:o=m,d=4;break;default:alert("Erro! Contacte o desenvolvedor do Sistema!")}let O=new Date(r.getTime()),X=0;for(;X<3;)O.setDate(O.getDate()+1),O.getDay()!==0&&O.getDay()!==6&&X++;let V=new Date(v.getTime());c==1?V.setDate(V.getDate()-15):c==2&&V.setDate(V.getDate()-30);let w=(V.getFullYear()-O.getFullYear())*12;c==1?(w-=O.getMonth(),w+=V.getMonth()-1,t.type==1&&(w=parseInt(w/3),d=1)):c==4&&(w-=r.getMonth()+1,w+=v.getMonth()-1),w=w<=0?1:w;let U=o/w;for(;U<1e3;)w-=1,U=o/w;if(c<4&&s.push({id:s.length,name:t.name,type:d,paid_amount:0,paid:0,total_amount:_,deadline:new Date(O).toISOString().slice(0,19).replace("T"," "),entry:!0,vouchers:[]}),c==1||c==4){let B=0;for(let L=0;L<w;L++)s.push({id:s.length,name:t.name,type:d,paid_amount:0,paid:0,total_amount:U,deadline:new Date(O.getFullYear(),O.getMonth()+1+B,g).toISOString().slice(0,19).replace("T"," "),entry:!1,vouchers:[]}),t.type==0?B++:B+=3}return(c==1||c==2)&&s.push({id:s.length,name:t.name,type:d,paid_amount:0,paid:0,total_amount:i,deadline:new Date(V).toISOString().slice(0,19).replace("T"," "),entry:!1,vouchers:[]}),s}const oe={class:"mt-5 mx-5"},ne={class:"flex flex-row align-middle items-center space-x-2"},de={class:"bg-blue-100 p-2 rounded-full text-blue-400"},ie=e("h2",{class:"text-2xl bold"},"Cadastrar Parcelas",-1),ce=e("p",{class:"text-xm text-gray-500 mt-3"},"Formulário para cadastro do parcelamento do pagamento da cerimônia",-1),re=["onSubmit"],ue={class:"overflow-hidden m-5 md:m-0 p-5 sm:rounded-md bg-white sm:p-3 flex-col-config divide-y-2"},me={class:"w-full m-0 p-0 space-y-2"},_e={class:"w-full"},pe=e("label",{for:"installment_name",class:"text-xs text-slate-700"},"Nome das parcelas",-1),xe={key:0,class:"w-full"},ge=e("label",{for:"installment_payment_day",class:"text-xs text-slate-700"},"Dia de pagamento das parcelas",-1),ve={class:"w-full"},he=e("label",{for:"installment_payment_option",class:"text-xs text-slate-700"},"Condição de pagamento",-1),ye=e("option",{value:"0",disabled:""},"Escolha uma das opções abaixo",-1),be=e("option",{value:"1"},"20% de entrada + 60% parcelado + 20% duas semanas antes do evento ",-1),fe=e("option",{value:"2"},"50% entrada + 50% uma mês antes do evento",-1),$e=e("option",{value:"3"},"100% pix com 5% de desconto",-1),we=e("option",{value:"4"},"Dividir valor total igualmente",-1),ke=[ye,be,fe,$e,we],Ce={key:1,class:"w-full py-3 flex flex-col"},Oe=e("label",{class:"text-xs text-slate-700"},"Tipo de mensalidade",-1),Se={class:"flex flex-row space-x-2 align-middle items-center"},je=e("label",{for:"mensal_input",class:"ml-2"},"Mensal",-1),Me={class:"flex flex-row space-x-2 align-middle items-center"},Ve=e("label",{for:"trimestral_input",class:"ml-2"},"Trimestral",-1),De={class:"mt-10 overflow-auto"},Ie={class:"w-full m-auto table-auto truncate"},Ee=e("thead",{class:"lg:border-b-2 lg:border-gray-500"},[e("th",null,"ID"),e("th",null,"Nome"),e("th",null,"Valor"),e("th",null,"Prazo")],-1),Pe={class:"py-3 px-5 truncate"},Fe={class:"py-3 px-5 truncate"},Ne={class:"py-3 px-5 truncate"},Te={class:"py-3 px-5 truncate"},Ue={class:"w-full px-4 py-3 sm:px-6 mt-5 text-right"},Be={__name:"ModalCreateInstallments",props:{ceremony:Object,budget:Object},emits:["modal_open"],setup(t,{emit:h}){const l=t,s=b({name:"Parcela",payment_day:10,type:0,payment_option:1}),m=b(I(s.value,l.budget.budget_total_value,l.budget.event_date+" "+l.budget.event_time)),r=q({id:m.value[m.value.length]+1,name:"Parcela",type:0,paid_amount:0,paid:!1,total_amount:0,deadline:new Date().toISOString().slice(0,19).replace("","T"),entry:!1,vouchers:[]}),v=()=>{s.value.name="",s.value.payment_option=1,h("modal_open",!1)},g=()=>{E.put(route("ceremonies.update",l.ceremony.id),{installment_list:m.value},{preserveScroll:!0,onSuccess:()=>v()})};return(_,i)=>(n(),D(N,{show:!0},{default:k(()=>[e("div",oe,[e("div",ne,[e("span",de,[x(a(Y),{class:"w-5 h-5"})]),ie]),ce]),e("form",{id:"create_task",onSubmit:F(g,["prevent"]),class:"w-full"},[e("div",ue,[e("div",me,[e("div",_e,[pe,C(e("input",{type:"text",id:"installment_name",placeholder:"Ex: Primeiro parcelamento","onUpdate:modelValue":i[0]||(i[0]=o=>s.value.name=o),onKeyup:i[1]||(i[1]=o=>m.value=a(I)(s.value,t.ceremony.total_negotiated_amount,t.budget.event_date+" "+t.budget.event_time)),class:"w-full border-slate-300 sm:text-md"},null,544),[[j,s.value.name]])]),s.value.payment_option==1||s.value.payment_option==4?(n(),u("div",xe,[ge,C(e("input",{type:"number",step:"1",min:"1",max:"28",id:"installment_payment_day",placeholder:"Ex: Todo dia 10 (Dia máximo: 28)","onUpdate:modelValue":i[2]||(i[2]=o=>s.value.payment_day=o),onKeyup:i[3]||(i[3]=o=>m.value=a(I)(s.value,t.ceremony.total_negotiated_amount,t.budget.event_date+" "+t.budget.event_time)),class:"w-full border-slate-300 sm:text-md"},null,544),[[j,s.value.payment_day]])])):y("",!0),e("div",ve,[he,C(e("select",{id:"installment_payment_option",class:"w-full border-slate-300 sm:text-md","onUpdate:modelValue":i[4]||(i[4]=o=>s.value.payment_option=o),onChange:i[5]||(i[5]=o=>m.value=a(I)(s.value,t.ceremony.total_negotiated_amount,t.budget.event_date+" "+t.budget.event_time))},ke,544),[[se,s.value.payment_option]])]),s.value.payment_option==1?(n(),u("div",Ce,[Oe,e("span",Se,[C(e("input",{id:"mensal_input",type:"radio",class:"form-radio text-stone-500",value:"0",name:"installment_type","onUpdate:modelValue":i[6]||(i[6]=o=>s.value.type=o),onChange:i[7]||(i[7]=o=>m.value=a(I)(s.value,t.ceremony.total_negotiated_amount,t.budget.event_date+" "+t.budget.event_time))},null,544),[[G,s.value.type]]),je]),e("span",Me,[C(e("input",{id:"trimestral_input",type:"radio",class:"form-radio text-stone-500",value:"1",name:"installment_type","onUpdate:modelValue":i[8]||(i[8]=o=>s.value.type=o),onChange:i[9]||(i[9]=o=>m.value=a(I)(s.value,t.ceremony.total_negotiated_amount,t.budget.event_date+" "+t.budget.event_time))},null,544),[[G,s.value.type]]),Ve])])):y("",!0),e("div",De,[e("table",Ie,[Ee,e("tbody",null,[(n(!0),u(M,null,P(m.value,(o,c)=>(n(),u("tr",{key:o.id,class:$(["lg:border-b-2 lg-border-gray-100 hover:bg-gray-200 text-center",{"bg-gray-100":c%2!=0}])},[e("td",Pe,"#"+p(o.id),1),e("td",Fe,p(o.name)+" "+p(o.paid?"(pago)":""),1),e("td",Ne,p(a(f)(o.total_amount)),1),e("td",Te,p(o.deadline.split(" ")[0]),1)],2))),128))])])])]),e("div",Ue,[x(T,{type:"button",class:$(["ml-4",{"opacity-25":a(r).processing}]),disabled:a(r).processing,onClick:v},{default:k(()=>[S(" Cancelar ")]),_:1},8,["class","disabled"]),x(K,{class:$(["ml-4",{"opacity-25":a(r).processing}]),disabled:a(r).processing},{default:k(()=>[S(" Cadastrar ")]),_:1},8,["class","disabled"])])])],40,re)]),_:1}))}},Re={class:"mt-5 mx-5"},ze={class:"flex flex-row align-middle items-center space-x-2"},Ae={class:"p-2 rounded-full"},qe={class:"text-2xl bold"},Ye={class:"text-xs"},Ke={class:"w-full overflow-hidden m-5 md:m-0 p-5 sm:rounded-md bg-white sm:p-3 flex-col-config divide-y-2"},Xe={class:"w-full overflow-hidden bg-white shadow sm:rounded-lg"},Le=e("div",{class:"px-4 py-5 sm:px-6"},[e("h3",{class:"text-base font-semibold leading-6 text-gray-900"},"Informações da Parcela")],-1),Ge={class:"border-t border-gray-200"},He={class:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},Je=e("dt",{class:"text-sm font-medium text-gray-500"},"Valor total da parcela",-1),Qe={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},We={class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},Ze=e("dt",{class:"text-sm font-medium text-gray-500"},"Valor pago",-1),et={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},tt={class:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},st=e("dt",{class:"text-sm font-medium text-gray-500"},"Valor restante",-1),at={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},lt={class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},ot=e("dt",{class:"text-sm font-medium text-gray-500"},"Prazo de Pagamento",-1),nt={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},dt={class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},it=e("dt",{class:"text-sm font-medium text-gray-500"},"Comprovantes",-1),ct={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},rt={role:"list",class:"divide-y divide-gray-200 rounded-md border border-gray-200"},ut={class:"flex w-0 flex-1 items-center"},mt=["title"],_t={class:"ml-2 w-0 flex-1"},pt={class:"text-xs text-gray-500"},xt={class:"ml-4 flex-shrink-0"},gt=["href"],vt={key:0,class:"flex items-center justify-between py-3 pl-3 pr-4 text-sm"},ht={class:"flex w-0 flex-1 items-center"},yt={class:"ml-2 flex-1 space-y-2 w-full"},bt={class:"w-full space-y-5"},ft=e("label",{for:"payment_amount",class:"text-gray-400"},"Valor de pagamento (R$)",-1),$t=["max"],wt=e("label",{for:"payment_date",class:"text-gray-400"},"Data do pagamento",-1),kt={class:"flex flex-row items-center align-middle space-x-3"},Ct={for:"voucher",class:"flex-col-config p-2 w-fit bg-blue-500 rounded-xl cursor-pointer",title:"Inserir comprovante"},Ot={class:"w-full flex-wrap"},St={class:"ml-4 flex-shrink-0"},jt={class:"w-full px-4 py-3 sm:px-6 mt-5 text-right"},Mt={__name:"ModalManageInstallment",props:{ceremony:Object,installment:Object,installments:Object,vouchers:Object},emits:["modal_open"],setup(t,{emit:h}){const l=t,s=b({id:l.installment.id,name:l.installment.name,paid_amount:l.installment.paid_amount,paid:l.installment.paid,total_amount:l.installment.total_amount,deadline:l.installment.deadline,entry:l.installment.entry,processing:!1}),m=b(l.vouchers),r=b({installment_id:s.value.id,name:null,value:s.value.total_amount-s.value.paid_amount,file:null,payment_date:new Date().toISOString().slice(0,10)}),v=()=>{if(s.value.paid||r.value.value>s.value.total_amount-s.value.paid_amount){alert("Você não pode pagar mais do que o valor restante!");return}if(!r.value.value||r.value.value<0){alert("Insira um valor entre R$ 0,00 e "+f(s.value.total_amount-s.value.paid_amount));return}if(!r.value.file){alert("O upload do comprovante é obrigatório!");return}s.value.processing=!0,E.post(route("ceremonies.update.voucher",l.ceremony.id),r.value,{preserveScroll:!0,onSuccess:()=>_()})},g=o=>{s.value.processing=!0,E.put(route("ceremonies.delete.voucher",l.ceremony.id),{id:o},{preserveScroll:!0,onSuccess:()=>_()})},_=()=>{const o=l.installments.find(c=>c.id==s.value.id);s.value.paid_amount=o.paid_amount,s.value.paid=o.paid,s.value.total_amount=o.total_amount,s.value.vouchers=o.vouchers,r.value.name=null,r.value.value=o.total_amount-o.paid_amount,r.value.file=null,s.value.processing=!1,Q.get(route("get-vouchers",l.installment.id)).then(c=>{m.value=c.data})},i=()=>{h("modal_open",!1)};return(o,c)=>(n(),D(N,{show:!0},{default:k(()=>[e("div",Re,[e("div",ze,[e("span",Ae,[x(a(z),{class:$(["w-6 h-6 text-gray-500",{"text-green-500":s.value.paid}])},null,8,["class"])]),e("h2",qe,[S(p(s.value.name)+" ",1),e("p",Ye,p(s.value.entry?" (Entrada)":""),1)])])]),e("form",{id:"create_task",onSubmit:c[4]||(c[4]=F((...d)=>o.submit&&o.submit(...d),["prevent"])),class:"w-full"},[e("div",Ke,[e("div",Xe,[Le,e("div",Ge,[e("dl",null,[e("div",He,[Je,e("dd",Qe,p(a(f)(s.value.total_amount)),1)]),e("div",We,[Ze,e("dd",et,p(a(f)(s.value.paid_amount)),1)]),e("div",tt,[st,e("dd",at,p(a(f)(s.value.total_amount-s.value.paid_amount)),1)]),e("div",lt,[ot,e("dd",nt,p(a(R)(s.value.deadline)),1)]),e("div",dt,[it,e("dd",ct,[e("ul",rt,[(n(!0),u(M,null,P(m.value,d=>(n(),u("li",{key:d.id,class:"flex items-center justify-between py-3 pl-3 pr-4 text-sm group"},[e("div",ut,[x(a(W),{class:"h-5 w-5 flex-shrink-0 text-gray-400 group-hover:hidden","aria-hidden":"true"}),x(a(A),{class:"h-5 w-5 flex-shrink-0 text-gray-400 hidden group-hover:inline-flex cursor-pointer",title:"Excluir pagamento","aria-hidden":"true",onClick:O=>g(d.id)},null,8,["onClick"]),e("span",{class:"ml-2 w-0 flex-1 truncate text-gray-500",title:d.name},p(d.name),9,mt),e("span",_t,p(a(f)(parseFloat(d.value))),1),e("span",pt,p(a(R)(d.payment_date).substr(0,10)),1)]),e("div",xt,[e("a",{href:"../storage/installment_files/"+d.file,target:"_blank",class:"font-medium text-indigo-600 hover:text-indigo-500"},"Baixar",8,gt)])]))),128)),s.value.paid?y("",!0):(n(),u("li",vt,[e("div",ht,[e("div",yt,[e("div",bt,[e("div",null,[ft,C(e("input",{id:"payment_amount",type:"number",step:"0.01",min:"0.00",max:s.value.total_amount-s.value.paid_amount,class:"w-full border-gray-300","onUpdate:modelValue":c[0]||(c[0]=d=>r.value.value=d),placeholder:"Valor"},null,8,$t),[[j,r.value.value]])]),e("div",null,[wt,C(e("input",{type:"date",id:"payment_date",placeholder:"Data do pagamento",class:"w-full border-slate-300 sm:text-md","onUpdate:modelValue":c[1]||(c[1]=d=>r.value.payment_date=d)},null,512),[[j,r.value.payment_date]])]),e("div",kt,[e("label",Ct,[x(a(Z),{class:"w-6 h-6 text-white"})]),e("span",Ot,p(r.value.name!=null?r.value.name:"Insira o comprovante (obrigatório)"),1),e("input",{id:"voucher",onInput:c[2]||(c[2]=d=>{r.value.name=d.target.files[0].name,r.value.file=d.target.files[0]}),type:"file",accept:".pdf",class:"hidden"},null,32)])])])]),e("div",St,[e("p",{class:"font-medium text-indigo-600 hover:text-indigo-500 cursor-pointer",onClick:c[3]||(c[3]=d=>v())}," Adicionar")])]))])])])])])]),e("div",jt,[x(T,{type:"button",class:$(["ml-4",{"opacity-25":s.value.processing}]),disabled:s.value.processing,onClick:i},{default:k(()=>[S(" Fechar ")]),_:1},8,["class","disabled"])])])],32)]),_:1}))}},Vt={class:"mt-5 mx-5"},Dt={class:"flex flex-row align-middle items-center space-x-2"},It={class:"bg-blue-100 p-2 rounded-full text-blue-400"},Et=e("h2",{class:"text-2xl bold"},"Cadastrar Parcelas",-1),Pt=e("p",{class:"text-xm text-gray-500 mt-3"},"Formulário para cadastro do parcelamento do pagamento da cerimônia",-1),Ft=["onSubmit"],Nt={class:"overflow-hidden m-5 md:m-0 p-5 sm:rounded-md bg-white sm:p-3 flex-col-config divide-y-2"},Tt={class:"w-full m-0 p-0 space-y-2"},Ut={class:"w-full"},Bt=e("label",{for:"form_name",class:"text-xs text-slate-700"},"Nome",-1),Rt={class:"w-full"},zt=e("label",{for:"form_amount",class:"text-xs text-slate-700"},"Valor (R$)",-1),At={class:"w-full px-4 py-3 sm:px-6 mt-5 text-right"},qt={__name:"ModalManageAdditions",props:{ceremony:Object,addition:Object},emits:["modal_open"],setup(t,{emit:h}){const l=t,s=q({ceremony_id:l.addition?l.addition.ceremony_id:l.ceremony.id,name:l.addition?l.addition.name:"",amount:l.addition?l.addition.amount:0,left_amount:l.addition?l.addition.left_amount:0,paid:l.addition?l.addition.paid:!1}),m=()=>{s.reset(),h("modal_open",!1)},r=()=>{s.post(route("ceremonies.create.addition"),{preserveScroll:!0,onSuccess:()=>m()})},v=()=>{s.put(route("ceremonies.update.addition",l.addition.id),{preserveScroll:!0,onSuccess:()=>m()})},g=()=>{l.addition?v():r()};return(_,i)=>(n(),u(M,null,[S(p(t.addition)+" ",1),x(N,{show:!0},{default:k(()=>[e("div",Vt,[e("div",Dt,[e("span",It,[x(a(Y),{class:"w-5 h-5"})]),Et]),Pt]),e("form",{id:"create_task",onSubmit:F(g,["prevent"]),class:"w-full"},[e("div",Nt,[e("div",Tt,[e("div",Ut,[Bt,C(e("input",{type:"text",id:"form_name",placeholder:"Ex: Mais uma mesa de buffet","onUpdate:modelValue":i[0]||(i[0]=o=>a(s).name=o),class:"w-full border-slate-300 sm:text-md",autofocus:"true"},null,512),[[j,a(s).name]])]),e("div",Rt,[zt,C(e("input",{type:"number",step:"0.01",min:"0",id:"form_amount",placeholder:"Ex: R$ 123,45","onUpdate:modelValue":i[1]||(i[1]=o=>a(s).amount=o),class:"w-full border-slate-300 sm:text-md"},null,512),[[j,a(s).amount]])]),e("div",At,[x(T,{type:"button",class:$(["ml-4",{"opacity-25":a(s).processing}]),disabled:a(s).processing,onClick:m},{default:k(()=>[S(" Cancelar ")]),_:1},8,["class","disabled"]),x(K,{class:$(["ml-4",{"opacity-25":a(s).processing}]),disabled:a(s).processing},{default:k(()=>[S(" Cadastrar ")]),_:1},8,["class","disabled"])])])])],40,Ft)]),_:1})],64))}},Yt={class:"flex-col-config mb-5 bg-stone-100 py-5 font-mono text-green-700"},Kt=e("p",{class:"text-4xl"},"Adições",-1),Xt={class:"text-xl"},Lt={key:0,class:"mt-10 overflow-auto"},Gt={class:"w-full m-auto table-auto truncate"},Ht={class:"lg:border-b-2 lg:border-gray-500"},Jt=e("th",null,"Pago",-1),Qt=e("th",null,"Nome",-1),Wt=e("th",null,"Valor Total",-1),Zt=e("th",null,"Valor Restante",-1),es={key:0},ts={key:1},ss={key:2},as={class:"py-3 px-5 flex flex-col items-center align-middle"},ls=["title"],os={class:"py-3 px-5 truncate"},ns={class:"py-3 px-5 truncate"},ds=["title","onClick"],is=["title","onClick"],cs=["title","onClick"],rs={key:1,class:"w-full text-center"},us=e("p",null,"Não há adições cadastradas no momento!",-1),ms=[us],_s=e("span",null,"Cadastrar adição",-1),ps={__name:"FinancialAdditions",props:{ceremony:Object,budget:Object,additions:Object},setup(t){const h=b(!1),l=b({}),s=(v=null)=>{l.value=v,h.value=!0},m=v=>{E.delete(route("ceremonies.delete.addition",v),{preserveScroll:!0})},r=v=>{};return(v,g)=>(n(),u(M,null,[e("div",Yt,[Kt,e("p",Xt,p(a(f)(t.ceremony.total_additions)),1)]),t.additions.length?(n(),u("div",Lt,[e("table",Gt,[e("thead",Ht,[Jt,Qt,Wt,Zt,t.budget.status==1?(n(),u("th",es,"Pagar")):y("",!0),t.budget.status==2?(n(),u("th",ts,"Editar")):y("",!0),t.budget.status==2?(n(),u("th",ss,"Excluir")):y("",!0)]),e("tbody",null,[(n(!0),u(M,null,P(t.additions,(_,i=0)=>(n(),u("tr",{key:_.id,class:$(["lg:border-b-2 lg-border-gray-100 hover:bg-gray-200 text-center",{"bg-gray-100":i++%2==0}])},[e("td",as,[x(a(z),{class:$(["w-5 h-5",{"text-green-500":_.paid,"text-gray-500":!_.paid}])},null,8,["class"])]),e("td",{class:"py-3 px-5 truncate",title:_.name},p(_.name),9,ls),e("td",os,p(a(f)(_.amount)),1),e("td",ns,p(a(f)(_.amount-_.left_amount)),1),t.budget.status==1?(n(),u("td",{key:0,class:"py-3 px-5 cursor-pointer",title:"Pagar "+_.name,onClick:o=>r(_.id)},[x(a(ee),{class:"w-full h-6 text-stone-500"})],8,ds)):y("",!0),t.budget.status==2?(n(),u("td",{key:1,class:"py-3 px-5 cursor-pointer",title:"Editar "+_.name,onClick:o=>s(_)},[x(a(H),{class:"w-full h-6 text-stone-500"})],8,is)):y("",!0),t.budget.status==2?(n(),u("td",{key:2,class:"py-3 px-5 cursor-pointer",title:"Excluir "+_.name,onClick:o=>m(_.id)},[x(a(A),{class:"w-full h-6 text-stone-500"})],8,cs)):y("",!0)],2))),128))])])])):(n(),u("div",rs,ms)),t.budget.status==2?(n(),u("p",{key:2,class:"text-blue-400 hover:text-blue-600 active:text-blue-800 cursor-pointer flex-row-config space-x-1 py-5",onClick:g[0]||(g[0]=_=>s(null))},[x(a(J),{class:"w-4 h-4"}),_s])):y("",!0),h.value?(n(),D(qt,{key:3,ceremony:t.ceremony,addition:l.value,onModal_open:g[1]||(g[1]=_=>h.value=_)},null,8,["ceremony","addition"])):y("",!0)],64))}},xs={class:"mt-5 mx-5"},gs={class:"flex flex-row align-middle items-center space-x-2"},vs={class:"bg-blue-100 p-2 rounded-full text-blue-400"},hs=e("h2",{class:"text-2xl bold"},"Cadastrar Parcelas",-1),ys=e("p",{class:"text-xm text-gray-500 mt-3"},"Formulário para cadastro do parcelamento do pagamento da cerimônia",-1),bs=["onSubmit"],fs={class:"overflow-hidden m-5 md:m-0 p-5 sm:rounded-md bg-white sm:p-3 flex-col-config divide-y-2"},$s={class:"w-full m-0 p-0 space-y-2"},ws={class:"w-full"},ks=e("label",{for:"form_name",class:"text-xs text-slate-700"},"Nome",-1),Cs={class:"w-full"},Os=e("label",{for:"form_amount",class:"text-xs text-slate-700"},"Valor (R$)",-1),Ss={class:"w-full px-4 py-3 sm:px-6 mt-5 text-right"},js={__name:"ModalManageExpenses",props:{ceremony:Object,expense:Object},emits:["modal_open"],setup(t,{emit:h}){const l=t,s=q({ceremony_id:l.expense?l.expense.ceremony_id:l.ceremony.id,name:l.expense?l.expense.name:"",amount:l.expense?l.expense.amount:0}),m=()=>{s.reset(),h("modal_open",!1)},r=()=>{s.post(route("ceremonies.create.expense"),{preserveScroll:!0,onSuccess:()=>m()})},v=()=>{s.put(route("ceremonies.update.expense",l.expense.id),{preserveScroll:!0,onSuccess:()=>m()})},g=()=>{l.expense?v():r()};return(_,i)=>(n(),u(M,null,[S(p(t.expense)+" ",1),x(N,{show:!0},{default:k(()=>[e("div",xs,[e("div",gs,[e("span",vs,[x(a(Y),{class:"w-5 h-5"})]),hs]),ys]),e("form",{id:"create_task",onSubmit:F(g,["prevent"]),class:"w-full"},[e("div",fs,[e("div",$s,[e("div",ws,[ks,C(e("input",{type:"text",id:"form_name",placeholder:"Ex: Mais uma mesa de buffet","onUpdate:modelValue":i[0]||(i[0]=o=>a(s).name=o),class:"w-full border-slate-300 sm:text-md",autofocus:"true"},null,512),[[j,a(s).name]])]),e("div",Cs,[Os,C(e("input",{type:"number",step:"0.01",min:"0",id:"form_amount",placeholder:"Ex: R$ 123,45","onUpdate:modelValue":i[1]||(i[1]=o=>a(s).amount=o),class:"w-full border-slate-300 sm:text-md"},null,512),[[j,a(s).amount]])]),e("div",Ss,[x(T,{type:"button",class:$(["ml-4",{"opacity-25":a(s).processing}]),disabled:a(s).processing,onClick:m},{default:k(()=>[S(" Cancelar ")]),_:1},8,["class","disabled"]),x(K,{class:$(["ml-4",{"opacity-25":a(s).processing}]),disabled:a(s).processing},{default:k(()=>[S(" Cadastrar ")]),_:1},8,["class","disabled"])])])])],40,bs)]),_:1})],64))}},Ms={class:"flex-col-config mb-5 bg-stone-100 py-5 font-mono text-red-700"},Vs=e("p",{class:"text-4xl"},"Despesas",-1),Ds={class:"text-xl"},Is={key:0,class:"mt-10 overflow-auto"},Es={class:"w-full m-auto table-auto truncate"},Ps={class:"lg:border-b-2 lg:border-gray-500"},Fs=e("th",null,"Nome",-1),Ns=e("th",null,"Valor",-1),Ts={key:0},Us={key:1},Bs=["title"],Rs={class:"py-3 px-5 truncate"},zs=["title","onClick"],As=["title","onClick"],qs={key:1,class:"w-full text-center"},Ys=e("p",null,"Não há despesas cadastradas no momento!",-1),Ks=[Ys],Xs=e("span",null,"Cadastrar despesa",-1),Ls={__name:"FinancialExpenses",props:{ceremony:Object,budget:Object,expenses:Object},setup(t){const h=b(!1),l=b({}),s=(r=null)=>{l.value=r,h.value=!0},m=r=>{E.delete(route("ceremonies.delete.expense",r),{preserveScroll:!0})};return(r,v)=>(n(),u(M,null,[e("div",Ms,[Vs,e("p",Ds,p(a(f)(t.ceremony.total_expenses)),1)]),t.expenses.length?(n(),u("div",Is,[e("table",Es,[e("thead",Ps,[Fs,Ns,t.budget.status==1||t.budget.status==2?(n(),u("th",Ts,"Editar")):y("",!0),t.budget.status==1||t.budget.status==2?(n(),u("th",Us,"Excluir")):y("",!0)]),e("tbody",null,[(n(!0),u(M,null,P(t.expenses,(g,_=0)=>(n(),u("tr",{key:g.id,class:$(["lg:border-b-2 lg-border-gray-100 hover:bg-gray-200 text-center",{"bg-gray-100":_++%2==0}])},[e("td",{class:"py-3 px-5 truncate",title:g.name},p(g.name),9,Bs),e("td",Rs,p(a(f)(g.amount)),1),t.budget.status==1||t.budget.status==2?(n(),u("td",{key:0,class:"py-3 px-5 cursor-pointer",title:"Editar "+g.name,onClick:i=>s(g)},[x(a(H),{class:"w-full h-6 text-stone-500"})],8,zs)):y("",!0),t.budget.status==1||t.budget.status==2?(n(),u("td",{key:1,class:"py-3 px-5 cursor-pointer",title:"Excluir "+g.name,onClick:i=>m(g.id)},[x(a(A),{class:"w-full h-6 text-stone-500"})],8,As)):y("",!0)],2))),128))])])])):(n(),u("div",qs,Ks)),t.budget.status==1||t.budget.status==2?(n(),u("p",{key:2,class:"text-blue-400 hover:text-blue-600 active:text-blue-800 cursor-pointer flex-row-config space-x-1 py-5",onClick:v[0]||(v[0]=g=>s(null))},[x(a(J),{class:"w-4 h-4"}),Xs])):y("",!0),h.value?(n(),D(js,{key:3,ceremony:t.ceremony,expense:l.value,onModal_open:v[1]||(v[1]=g=>h.value=g)},null,8,["ceremony","expense"])):y("",!0)],64))}},Gs={class:"w-11/12 m-auto px-0 rounded-xl shadow-2xl min-h-[525px] my-10 bg-white select-none overflow-hidden"},Hs={class:"w-full min-h-[10px] bg-gray-900"},Js={class:"w-full bg-stone-700 text-white flex-row-config space-x-5 text-2xl py-5"},Qs=e("p",null,"Excedente:",-1),Ws={class:"inline-flex"},Zs={class:"m-5 rounded-md border-2 border-stone-100"},ea={class:"flex-col-config mb-5 bg-stone-100 py-5 font-mono text-yellow-700"},ta=e("p",{class:"text-4xl"},"Parcelas",-1),sa={class:"text-xl"},aa={key:0,class:"text-center"},la={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 m-5"},oa=["onClick"],na={class:"p-2 w-full flex flex-col space-y-2"},da={class:"text-xl text-gray-900"},ia={class:"text-xs text-gray-700"},ca={class:"text-lg text-gray-900"},ra={class:"text-sm text-gray-500"},ua={key:0,class:"text-xs text-gray-400"},ma={key:2,class:"w-full flex-row-config"},_a={class:"mx-10"},pa=e("label",{for:"obs",class:"text-xs text-slate-700"},"Observações",-1),xa=["rows"],ga={class:"m-5 rounded-md border-2 border-stone-100"},va={class:"m-5 rounded-md border-2 border-stone-100"},ha={class:"w-full p-10"},ya={__name:"Financial",props:{ceremony:Object,budget:Object,installments:Object,additions:Object,expenses:Object,has_installment:Boolean},setup(t){const h=t,l=b(!1),s=b(!1),m=b({}),r=b({}),v=b(h.ceremony.observations||""),g=b(v.value.split(`
`).length||1),_=o=>{h.budget.status==1&&(m.value=o,Q.get(route("get-vouchers",o.id)).then(c=>{console.log(c.data),r.value=c.data,s.value=!0}))},i=()=>{g.value=v.value.split(`
`).length||1,E.put(route("ceremonies.updade.obs",h.ceremony.id),{obs:v.value},{preserveScroll:!0})};return(o,c)=>(n(),u("section",Gs,[e("div",Hs,[x(ae,{ceremony:t.ceremony,budget:t.budget,button_type:1},null,8,["ceremony","budget"])]),e("div",Js,[Qs,e("span",Ws,p(a(f)(t.ceremony.total_negotiated_amount+t.ceremony.total_additions-t.ceremony.total_expenses)),1)]),e("div",Zs,[e("div",ea,[ta,e("p",sa,p(a(f)(t.ceremony.total_installments)),1)]),t.installments.length?(n(),u("div",la,[(n(!0),u(M,null,P(t.installments,d=>(n(),u("div",{key:d.id,class:$(["bg-white border-2 group overflow-hidden border-gray-200 rounded-xl flex flex-row space-x-5 px-5 items-center align-middle",{"cursor-pointer hover:shadow-2xl active:shadow-none":t.budget.status==1}]),title:"Opções da Parcela",onClick:O=>_(d)},[x(a(z),{class:$(["w-10 h-10",{"text-green-500":d.paid,"text-gray-500":!d.paid}])},null,8,["class"]),e("div",na,[e("p",da,p(d.name),1),e("div",null,[e("p",ia,"Restante: "+p(a(f)(d.total_amount-d.paid_amount)),1),e("p",ca,p(a(f)(d.total_amount)),1)]),e("div",null,[e("p",ra,p(a(R)(d.deadline).split(" ")[0]),1),d.entry?(n(),u("p",ua,"Entrada")):y("",!0)])])],10,oa))),128))])):(n(),u("div",aa,"Não há parcelas cadastradas no momento")),t.budget.status==2?(n(),u("div",ma,[e("button",{class:"p-3 rounded-lg my-2 bg-stone-900 text-white text-lg",onClick:c[0]||(c[0]=d=>l.value=!0)},"Cadastrar parcelas")])):y("",!0)]),e("div",_a,[pa,C(e("textarea",{id:"obs",rows:g.value,"onUpdate:modelValue":c[1]||(c[1]=d=>v.value=d),placeholder:"Observações sobre a Cerimônia",class:"w-full border-slate-300 sm:text-md",onInput:i,autofocus:"true"},null,40,xa),[[j,v.value]])]),e("div",ga,[x(ps,{ceremony:t.ceremony,budget:t.budget,additions:t.additions},null,8,["ceremony","budget","additions"])]),e("div",va,[x(Ls,{ceremony:t.ceremony,budget:t.budget,expenses:t.expenses},null,8,["ceremony","budget","expenses"])]),e("div",ha,[x(le,{budget:t.budget,ceremony:t.ceremony,has_installment:t.has_installment},null,8,["budget","ceremony","has_installment"])]),l.value?(n(),D(Be,{key:0,ceremony:t.ceremony,budget:t.budget,onModal_open:c[2]||(c[2]=d=>l.value=d)},null,8,["ceremony","budget"])):y("",!0),s.value?(n(),D(Mt,{key:1,ceremony:t.ceremony,installments:t.installments,installment:m.value,vouchers:r.value,onModal_open:c[3]||(c[3]=d=>s.value=d)},null,8,["ceremony","installments","installment","vouchers"])):y("",!0)]))}},ba=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Orçamentos ",-1),Ma={__name:"Financials",props:{submenu:Object,submenu_category:String,activated_page:Number,selected_client:Object,budget_list:Object,budget_selects_options:Object,budget:Object,ceremony:Object,installments:Object,additions:Object,expenses:Object,has_installment:Boolean},setup(t){return(h,l)=>(n(),D(te,{title:"Clientes",submenu:t.submenu,activated_page:t.activated_page,submenu_category:t.submenu_category},{header:k(()=>[ba]),default:k(()=>[x(ya,{budget:t.budget,ceremony:t.ceremony,installments:t.installments,additions:t.additions,expenses:t.expenses,has_installment:t.has_installment},null,8,["budget","ceremony","installments","additions","expenses","has_installment"])]),_:1},8,["submenu","activated_page","submenu_category"]))}};export{Ma as default};
