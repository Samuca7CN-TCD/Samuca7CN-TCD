import{C as z,a as G,X as F,b as H,c as q,P as J,_ as Q}from"./AppLayout-e213362d.js";import{d as f,T as R,o as d,c as I,w as $,a as e,b as v,u as l,i as P,l as k,q as j,e as c,f as b,s as W,z as A,F as S,h as N,n as w,t as p,g as C,O as E,y as K}from"./app-202f2b6b.js";import{P as T}from"./index-b0ac13c8.js";import{_ as U}from"./Modal-37b3cda1.js";import{_ as B}from"./PrimaryButton-25cb44cb.js";import{_ as D}from"./SecondaryButton-0331ef90.js";import{l as M,_ as Y}from"./loadInstallments-6baa04ba.js";import{t as h,f as V}from"./shared_functions-016de35d.js";const Z={class:"mt-5 mx-5"},ee={class:"flex flex-row align-middle items-center space-x-2"},te={class:"bg-blue-100 p-2 rounded-full text-blue-400"},se=e("h2",{class:"text-2xl bold"},"Cadastrar Parcelas",-1),ae=e("p",{class:"text-xm text-gray-500 mt-3"},"Formulário para cadastro do parcelamento do pagamento da cerimônia",-1),le=["onSubmit"],oe={class:"overflow-hidden m-5 md:m-0 p-5 sm:rounded-md bg-white sm:p-3 flex-col-config divide-y-2"},ne={class:"w-full m-0 p-0 space-y-2"},de={class:"w-full"},ie=e("label",{for:"installment_name",class:"text-xs text-slate-700"},"Nome das parcelas",-1),ue={key:0,class:"w-full"},ce=e("label",{for:"installment_payment_day",class:"text-xs text-slate-700"},"Dia de pagamento das parcelas",-1),re={class:"w-full"},me=e("label",{for:"installment_payment_option",class:"text-xs text-slate-700"},"Condição de pagamento",-1),_e=e("option",{value:"0",disabled:""},"Escolha uma das opções abaixo",-1),pe=e("option",{value:"1"},"20% de entrada + 60% parcelado + 20% duas semanas antes do evento ",-1),ve=e("option",{value:"2"},"50% entrada + 50% uma mês antes do evento",-1),xe=e("option",{value:"3"},"100% pix com 5% de desconto",-1),ye=e("option",{value:"4"},"Dividir valor total igualmente",-1),ge=[_e,pe,ve,xe,ye],fe={key:1,class:"w-full py-3 flex flex-col"},be=e("label",{class:"text-xs text-slate-700"},"Tipo de mensalidade",-1),he={class:"flex flex-row space-x-2 align-middle items-center"},$e=e("label",{for:"mensal_input",class:"ml-2"},"Mensal",-1),we={class:"flex flex-row space-x-2 align-middle items-center"},ke=e("label",{for:"trimestral_input",class:"ml-2"},"Trimestral",-1),Ce={class:"mt-10 overflow-auto"},Oe={class:"w-full m-auto table-auto truncate"},je=e("thead",{class:"lg:border-b-2 lg:border-gray-500"},[e("th",null,"ID"),e("th",null,"Nome"),e("th",null,"Valor"),e("th",null,"Prazo")],-1),Se={class:"py-3 px-5 truncate"},Me={class:"py-3 px-5 truncate"},Ve={class:"py-3 px-5 truncate"},Ie={class:"py-3 px-5 truncate"},Ee={class:"w-full px-4 py-3 sm:px-6 mt-5 text-right"},Ne={__name:"ModalCreateInstallments",props:{ceremony:Object,budget:Object},emits:["modal_open"],setup(s,{emit:n}){const o=s,t=f({name:"Parcela",payment_day:10,type:0,payment_option:1}),_=f(M(t.value,o.budget.budget_total_value,o.budget.event_date)),u=R({id:_.value[_.value.length]+1,name:"Parcela",type:0,paid_amount:0,paid:!1,total_amount:0,deadline:new Date().toISOString().slice(0,19).replace("","T"),entry:!1,vouchers:[]}),x=()=>{t.value.name="",t.value.payment_option=1,n("modal_open",!1)},y=()=>{E.put(route("ceremonies.update",o.ceremony.id),{installment_list:_.value},{preserveScroll:!0,onSuccess:()=>x()})};return(g,r)=>(d(),I(U,{show:!0},{default:$(()=>[e("div",Z,[e("div",ee,[e("span",te,[v(l(T),{class:"w-5 h-5"})]),se]),ae]),e("form",{id:"create_task",onSubmit:P(y,["prevent"]),class:"w-full"},[e("div",oe,[e("div",ne,[e("div",de,[ie,k(e("input",{type:"text",id:"installment_name",placeholder:"Ex: Primeiro parcelamento","onUpdate:modelValue":r[0]||(r[0]=a=>t.value.name=a),onKeyup:r[1]||(r[1]=a=>_.value=l(M)(t.value,s.ceremony.total_negotiated_amount,s.budget.event_date)),class:"w-full border-slate-300 sm:text-md"},null,544),[[j,t.value.name]])]),t.value.payment_option==1||t.value.payment_option==4?(d(),c("div",ue,[ce,k(e("input",{type:"number",step:"1",min:"1",max:"28",id:"installment_payment_day",placeholder:"Ex: Todo dia 10 (Dia máximo: 28)","onUpdate:modelValue":r[2]||(r[2]=a=>t.value.payment_day=a),onKeyup:r[3]||(r[3]=a=>_.value=l(M)(t.value,s.ceremony.total_negotiated_amount,s.budget.event_date)),class:"w-full border-slate-300 sm:text-md"},null,544),[[j,t.value.payment_day]])])):b("",!0),e("div",re,[me,k(e("select",{id:"installment_payment_option",class:"w-full border-slate-300 sm:text-md","onUpdate:modelValue":r[4]||(r[4]=a=>t.value.payment_option=a),onChange:r[5]||(r[5]=a=>_.value=l(M)(t.value,s.ceremony.total_negotiated_amount,s.budget.event_date))},ge,544),[[W,t.value.payment_option]])]),t.value.payment_option==1?(d(),c("div",fe,[be,e("span",he,[k(e("input",{id:"mensal_input",type:"radio",class:"form-radio text-stone-500",value:"0",name:"installment_type","onUpdate:modelValue":r[6]||(r[6]=a=>t.value.type=a),onChange:r[7]||(r[7]=a=>_.value=l(M)(t.value,s.ceremony.total_negotiated_amount,s.budget.event_date))},null,544),[[A,t.value.type]]),$e]),e("span",we,[k(e("input",{id:"trimestral_input",type:"radio",class:"form-radio text-stone-500",value:"1",name:"installment_type","onUpdate:modelValue":r[8]||(r[8]=a=>t.value.type=a),onChange:r[9]||(r[9]=a=>_.value=l(M)(t.value,s.ceremony.total_negotiated_amount,s.budget.event_date))},null,544),[[A,t.value.type]]),ke])])):b("",!0),e("div",Ce,[e("table",Oe,[je,e("tbody",null,[(d(!0),c(S,null,N(_.value,(a,m)=>(d(),c("tr",{key:a.id,class:w(["lg:border-b-2 lg-border-gray-100 hover:bg-gray-200 text-center",{"bg-gray-100":m%2!=0}])},[e("td",Se,"#"+p(a.id),1),e("td",Me,p(a.name)+" "+p(a.paid?"(pago)":""),1),e("td",Ve,p(l(h)(a.total_amount)),1),e("td",Ie,p(a.deadline.split(" ")[0]),1)],2))),128))])])])]),e("div",Ee,[v(D,{type:"button",class:w(["ml-4",{"opacity-25":l(u).processing}]),disabled:l(u).processing,onClick:x},{default:$(()=>[C(" Cancelar ")]),_:1},8,["class","disabled"]),v(B,{class:w(["ml-4",{"opacity-25":l(u).processing}]),disabled:l(u).processing},{default:$(()=>[C(" Cadastrar ")]),_:1},8,["class","disabled"])])])],40,le)]),_:1}))}},Pe={class:"mt-5 mx-5"},Ue={class:"flex flex-row align-middle items-center space-x-2"},De={class:"p-2 rounded-full"},Fe={class:"text-2xl bold"},Re={class:"text-xs"},Te={class:"w-full overflow-hidden m-5 md:m-0 p-5 sm:rounded-md bg-white sm:p-3 flex-col-config divide-y-2"},Be={class:"w-full overflow-hidden bg-white shadow sm:rounded-lg"},Ae=e("div",{class:"px-4 py-5 sm:px-6"},[e("h3",{class:"text-base font-semibold leading-6 text-gray-900"},"Informações da Parcela")],-1),ze={class:"border-t border-gray-200"},qe={class:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},Je=e("dt",{class:"text-sm font-medium text-gray-500"},"Valor total da parcela",-1),Ke={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},Xe={class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},Le=e("dt",{class:"text-sm font-medium text-gray-500"},"Valor pago",-1),Ge={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},He={class:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},Qe=e("dt",{class:"text-sm font-medium text-gray-500"},"Valor restante",-1),We={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},Ye={class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},Ze=e("dt",{class:"text-sm font-medium text-gray-500"},"Prazo de Pagamento",-1),et={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},tt={class:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},st=e("dt",{class:"text-sm font-medium text-gray-500"},"Comprovantes",-1),at={class:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0"},lt={role:"list",class:"divide-y divide-gray-200 rounded-md border border-gray-200"},ot={class:"flex w-0 flex-1 items-center"},nt=["title"],dt={class:"ml-2 w-0 flex-1"},it={class:"text-xs text-gray-500"},ut={class:"ml-4 flex-shrink-0"},ct=["href"],rt={key:0,class:"flex items-center justify-between py-3 pl-3 pr-4 text-sm"},mt={class:"flex w-0 flex-1 items-center"},_t={class:"ml-2 flex-1 space-y-2 w-full"},pt={class:"w-full space-y-5"},vt=e("label",{for:"payment_amount",class:"text-gray-400"},"Valor de pagamento (R$)",-1),xt=["max"],yt=e("label",{for:"payment_date",class:"text-gray-400"},"Data do pagamento",-1),gt={class:"flex flex-row items-center align-middle space-x-3"},ft={for:"voucher",class:"flex-col-config p-2 w-fit bg-blue-500 rounded-xl cursor-pointer",title:"Inserir comprovante"},bt={class:"w-full flex-wrap"},ht={class:"ml-4 flex-shrink-0"},$t={class:"w-full px-4 py-3 sm:px-6 mt-5 text-right"},wt={__name:"ModalManageInstallment",props:{ceremony:Object,installment:Object,installments:Object,vouchers:Object},emits:["modal_open"],setup(s,{emit:n}){const o=s,t=f({id:o.installment.id,name:o.installment.name,paid_amount:o.installment.paid_amount,paid:o.installment.paid,total_amount:o.installment.total_amount,deadline:o.installment.deadline,entry:o.installment.entry,processing:!1}),_=f(o.vouchers),u=f({installment_id:t.value.id,name:null,value:t.value.total_amount-t.value.paid_amount,file:null,payment_date:new Date().toISOString().slice(0,10)}),x=()=>{if(t.value.paid||u.value.value>t.value.total_amount-t.value.paid_amount){alert("Você não pode pagar mais do que o valor restante!");return}if(!u.value.value||u.value.value<0){alert("Insira um valor entre R$ 0,00 e "+h(t.value.total_amount-t.value.paid_amount));return}if(!u.value.file){alert("O upload do comprovante é obrigatório!");return}t.value.processing=!0,E.post(route("ceremonies.update.voucher",o.ceremony.id),u.value,{preserveScroll:!0,onSuccess:()=>g()})},y=a=>{t.value.processing=!0,E.put(route("ceremonies.delete.voucher",o.ceremony.id),{id:a},{preserveScroll:!0,onSuccess:()=>g()})},g=()=>{const a=o.installments.find(m=>m.id==t.value.id);t.value.paid_amount=a.paid_amount,t.value.paid=a.paid,t.value.total_amount=a.total_amount,t.value.vouchers=a.vouchers,u.value.name=null,u.value.value=a.total_amount-a.paid_amount,u.value.file=null,t.value.processing=!1,K.get(route("get-vouchers",o.installment.id)).then(m=>{_.value=m.data})},r=()=>{n("modal_open",!1)};return(a,m)=>(d(),I(U,{show:!0},{default:$(()=>[e("div",Pe,[e("div",Ue,[e("span",De,[v(l(z),{class:w(["w-6 h-6 text-gray-500",{"text-green-500":t.value.paid}])},null,8,["class"])]),e("h2",Fe,[C(p(t.value.name)+" ",1),e("p",Re,p(t.value.entry?" (Entrada)":""),1)])])]),e("form",{id:"create_task",onSubmit:m[4]||(m[4]=P((...i)=>a.submit&&a.submit(...i),["prevent"])),class:"w-full"},[e("div",Te,[e("div",Be,[Ae,e("div",ze,[e("dl",null,[e("div",qe,[Je,e("dd",Ke,p(l(h)(t.value.total_amount)),1)]),e("div",Xe,[Le,e("dd",Ge,p(l(h)(t.value.paid_amount)),1)]),e("div",He,[Qe,e("dd",We,p(l(h)(t.value.total_amount-t.value.paid_amount)),1)]),e("div",Ye,[Ze,e("dd",et,p(l(V)(t.value.deadline)),1)]),e("div",tt,[st,e("dd",at,[e("ul",lt,[(d(!0),c(S,null,N(_.value,i=>(d(),c("li",{key:i.id,class:"flex items-center justify-between py-3 pl-3 pr-4 text-sm group"},[e("div",ot,[v(l(G),{class:"h-5 w-5 flex-shrink-0 text-gray-400 group-hover:hidden","aria-hidden":"true"}),v(l(F),{class:"h-5 w-5 flex-shrink-0 text-gray-400 hidden group-hover:inline-flex cursor-pointer",title:"Excluir pagamento","aria-hidden":"true",onClick:O=>y(i.id)},null,8,["onClick"]),e("span",{class:"ml-2 w-0 flex-1 truncate text-gray-500",title:i.name},p(i.name),9,nt),e("span",dt,p(l(h)(parseFloat(i.value))),1),e("span",it,p(l(V)(i.payment_date).substr(0,10)),1)]),e("div",ut,[e("a",{href:"../storage/installment_files/"+i.file,target:"_blank",class:"font-medium text-indigo-600 hover:text-indigo-500"},"Baixar",8,ct)])]))),128)),t.value.paid?b("",!0):(d(),c("li",rt,[e("div",mt,[e("div",_t,[e("div",pt,[e("div",null,[vt,k(e("input",{id:"payment_amount",type:"number",step:"0.01",min:"0.00",max:t.value.total_amount-t.value.paid_amount,class:"w-full border-gray-300","onUpdate:modelValue":m[0]||(m[0]=i=>u.value.value=i),placeholder:"Valor"},null,8,xt),[[j,u.value.value]])]),e("div",null,[yt,k(e("input",{type:"date",id:"payment_date",placeholder:"Data do pagamento",class:"w-full border-slate-300 sm:text-md","onUpdate:modelValue":m[1]||(m[1]=i=>u.value.payment_date=i)},null,512),[[j,u.value.payment_date]])]),e("div",gt,[e("label",ft,[v(l(H),{class:"w-6 h-6 text-white"})]),e("span",bt,p(u.value.name!=null?u.value.name:"Insira o comprovante (obrigatório)"),1),e("input",{id:"voucher",onInput:m[2]||(m[2]=i=>{u.value.name=i.target.files[0].name,u.value.file=i.target.files[0]}),type:"file",accept:".pdf",class:"hidden"},null,32)])])])]),e("div",ht,[e("p",{class:"font-medium text-indigo-600 hover:text-indigo-500 cursor-pointer",onClick:m[3]||(m[3]=i=>x())}," Adicionar")])]))])])])])])]),e("div",$t,[v(D,{type:"button",class:w(["ml-4",{"opacity-25":t.value.processing}]),disabled:t.value.processing,onClick:r},{default:$(()=>[C(" Fechar ")]),_:1},8,["class","disabled"])])])],32)]),_:1}))}},kt={class:"mt-5 mx-5"},Ct={class:"flex flex-row align-middle items-center space-x-2"},Ot={class:"bg-blue-100 p-2 rounded-full text-blue-400"},jt=e("h2",{class:"text-2xl bold"},"Cadastrar Parcelas",-1),St=e("p",{class:"text-xm text-gray-500 mt-3"},"Formulário para cadastro do parcelamento do pagamento da cerimônia",-1),Mt=["onSubmit"],Vt={class:"overflow-hidden m-5 md:m-0 p-5 sm:rounded-md bg-white sm:p-3 flex-col-config divide-y-2"},It={class:"w-full m-0 p-0 space-y-2"},Et={class:"w-full"},Nt=e("label",{for:"form_name",class:"text-xs text-slate-700"},"Nome",-1),Pt={class:"w-full"},Ut=e("label",{for:"form_amount",class:"text-xs text-slate-700"},"Valor (R$)",-1),Dt={class:"w-full px-4 py-3 sm:px-6 mt-5 text-right"},Ft={__name:"ModalManageAdditions",props:{ceremony:Object,budget:Object,first_installment:Object,addition:Object,op_type:Number},emits:["modal_open"],setup(s,{emit:n}){const o=s,t=R({name:o.addition.name,amount:o.addition.amount,op_type:o.op_type}),_=[1,1,2,3,4];f({config:o.first_installment?{name:o.first_installment.name||null,payment_day:parseInt(V(o.first_installment.deadline).split("/")[0])||null,type:o.first_installment.type||null,payment_option:_[o.first_installment.type]||null}:null,total_value:o.ceremony.total_negotiated_amount+o.ceremony.total_additions,event_date:o.budget.event_date});const u=()=>{t.reset(),n("modal_open",!1)},x=()=>{t.put(route("ceremonies.update.addition",o.ceremony.id),{preserveScroll:!0,onSuccess:()=>u()})};return(y,g)=>(d(),c(S,null,[C(p(s.addition)+" ",1),v(U,{show:!0},{default:$(()=>[e("div",kt,[e("div",Ct,[e("span",Ot,[v(l(T),{class:"w-5 h-5"})]),jt]),St]),e("form",{id:"create_task",onSubmit:P(x,["prevent"]),class:"w-full"},[e("div",Vt,[e("div",It,[e("div",Et,[Nt,k(e("input",{type:"text",id:"form_name",placeholder:"Ex: Mais uma mesa de buffet","onUpdate:modelValue":g[0]||(g[0]=r=>l(t).name=r),class:"w-full border-slate-300 sm:text-md",autofocus:"true"},null,512),[[j,l(t).name]])]),e("div",Pt,[Ut,k(e("input",{type:"number",step:"0.01",min:"0",id:"form_amount",placeholder:"Ex: R$ 123,45","onUpdate:modelValue":g[1]||(g[1]=r=>l(t).amount=r),class:"w-full border-slate-300 sm:text-md"},null,512),[[j,l(t).amount]])]),e("div",Dt,[v(D,{type:"button",class:w(["ml-4",{"opacity-25":l(t).processing}]),disabled:l(t).processing,onClick:u},{default:$(()=>[C(" Cancelar ")]),_:1},8,["class","disabled"]),v(B,{class:w(["ml-4",{"opacity-25":l(t).processing}]),disabled:l(t).processing},{default:$(()=>[C(" Cadastrar ")]),_:1},8,["class","disabled"])])])])],40,Mt)]),_:1})],64))}},Rt={class:"flex-col-config mb-5 bg-stone-100 py-5 font-mono text-green-700"},Tt=e("p",{class:"text-4xl"},"Adições",-1),Bt={class:"text-xl"},At={key:0,class:"mt-10 overflow-auto"},zt={class:"w-full m-auto table-auto truncate"},qt={class:"lg:border-b-2 lg:border-gray-500"},Jt=e("th",null,"Nome",-1),Kt=e("th",null,"Valor",-1),Xt={key:0},Lt={key:1},Gt=["title"],Ht={class:"py-3 px-5 truncate"},Qt=["title","onClick"],Wt=["title","onClick"],Yt={key:1,class:"w-full text-center"},Zt=e("p",null,"Não há adições cadastradas no momento!",-1),es=[Zt],ts=e("span",null,"Cadastrar adição",-1),ss={__name:"FinancialAdditions",props:{ceremony:Object,budget:Object,first_installment:Object,additions:Object},setup(s){const n=s,o=f(!1),t=f({name:"",amount:0}),_=f(0),u=[1,1,2,3,4],x=f({config:n.first_installment?{name:n.first_installment.name||null,payment_day:parseInt(V(n.first_installment.deadline).split("/")[0])||null,type:n.first_installment.type||null,payment_option:u[n.first_installment.type]||null}:null,total_value:n.ceremony.total_negotiated_amount+n.ceremony.total_additions,event_date:n.budget.event_date}),y=a=>{x.value.config=n.first_installment?{name:n.first_installment.name||null,payment_day:parseInt(V(n.first_installment.deadline).split("/")[0])||null,type:n.first_installment.type||null,payment_option:u[n.first_installment.type]||null}:null,x.value.total_value=n.ceremony.total_negotiated_amount+n.ceremony.total_additions,x.value.event_date=n.budget.event_date,a?(t.value.name=a,t.value.amount=n.additions[a],_.value=1):(t.value.name="",t.value.amount=0,_.value=0),o.value=!0},g=a=>{_.value=2,E.put(route("ceremonies.update.addition",n.ceremony.id),{name:a,amount:n.additions[a],op_type:_.value},{preserveScroll:!0,onSuccess:()=>setTimeout(r(),500)})},r=()=>{if(x.value.config==null)return;x.value.config={name:n.first_installment.name||null,payment_day:parseInt(V(n.first_installment.deadline).split("/")[0])||null,type:n.first_installment.type||null,payment_option:u[n.first_installment.type]||null},x.value.total_value=n.ceremony.total_negotiated_amount+n.ceremony.total_additions,x.value.event_date=n.budget.event_date;const a=M(x.value.config,x.value.total_value,x.value.event_date);E.put(route("ceremonies.update",n.ceremony.id),{installment_list:a},{preserveScroll:!0})};return(a,m)=>(d(),c(S,null,[e("div",Rt,[Tt,e("p",Bt,p(l(h)(s.ceremony.total_additions)),1)]),Object.values(s.additions).length?(d(),c("div",At,[e("table",zt,[e("thead",qt,[Jt,Kt,s.budget.status==2?(d(),c("th",Xt,"Editar")):b("",!0),s.budget.status==2?(d(),c("th",Lt,"Excluir")):b("",!0)]),e("tbody",null,[(d(!0),c(S,null,N(s.additions,(i,O,X=0)=>(d(),c("tr",{key:O,class:w(["lg:border-b-2 lg-border-gray-100 hover:bg-gray-200 text-center",{"bg-gray-100":X++%2==0}])},[e("td",{class:"py-3 px-5 truncate",title:O},p(O),9,Gt),e("td",Ht,p(l(h)(i)),1),s.budget.status==2?(d(),c("td",{key:0,class:"py-3 px-5 cursor-pointer",title:"Editar "+O,onClick:L=>y(O)},[v(l(q),{class:"w-full h-6 text-stone-500"})],8,Qt)):b("",!0),s.budget.status==2?(d(),c("td",{key:1,class:"py-3 px-5 cursor-pointer",title:"Excluir "+O,onClick:L=>g(O)},[v(l(F),{class:"w-full h-6 text-stone-500"})],8,Wt)):b("",!0)],2))),128))])])])):(d(),c("div",Yt,es)),s.budget.status==2?(d(),c("p",{key:2,class:"text-blue-400 hover:text-blue-600 active:text-blue-800 cursor-pointer flex-row-config space-x-1 py-5",onClick:m[0]||(m[0]=i=>y(null))},[v(l(J),{class:"w-4 h-4"}),ts])):b("",!0),o.value?(d(),I(Ft,{key:3,ceremony:s.ceremony,budget:s.budget,first_installment:s.first_installment,addition:t.value,op_type:_.value,onModal_open:m[1]||(m[1]=i=>o.value=i)},null,8,["ceremony","budget","first_installment","addition","op_type"])):b("",!0)],64))}},as={class:"mt-5 mx-5"},ls={class:"flex flex-row align-middle items-center space-x-2"},os={class:"bg-blue-100 p-2 rounded-full text-blue-400"},ns=e("h2",{class:"text-2xl bold"},"Cadastrar Parcelas",-1),ds=e("p",{class:"text-xm text-gray-500 mt-3"},"Formulário para cadastro do parcelamento do pagamento da cerimônia",-1),is=["onSubmit"],us={class:"overflow-hidden m-5 md:m-0 p-5 sm:rounded-md bg-white sm:p-3 flex-col-config divide-y-2"},cs={class:"w-full m-0 p-0 space-y-2"},rs={class:"w-full"},ms=e("label",{for:"form_name",class:"text-xs text-slate-700"},"Nome",-1),_s={class:"w-full"},ps=e("label",{for:"form_amount",class:"text-xs text-slate-700"},"Valor (R$)",-1),vs={class:"w-full px-4 py-3 sm:px-6 mt-5 text-right"},xs={__name:"ModalManageExpenses",props:{ceremony_id:Number,expense:Object,op_type:Number},emits:["modal_open"],setup(s,{emit:n}){const o=s,t=R({name:o.expense.name,amount:o.expense.amount,op_type:o.op_type}),_=()=>{t.reset(),n("modal_open",!1)},u=()=>{t.put(route("ceremonies.update.expense",o.ceremony_id),{preserveScroll:!0,onSuccess:()=>_()})};return(x,y)=>(d(),c(S,null,[C(p(s.expense)+" ",1),v(U,{show:!0},{default:$(()=>[e("div",as,[e("div",ls,[e("span",os,[v(l(T),{class:"w-5 h-5"})]),ns]),ds]),e("form",{id:"create_task",onSubmit:P(u,["prevent"]),class:"w-full"},[e("div",us,[e("div",cs,[e("div",rs,[ms,k(e("input",{type:"text",id:"form_name",placeholder:"Ex: Mais uma mesa de buffet","onUpdate:modelValue":y[0]||(y[0]=g=>l(t).name=g),class:"w-full border-slate-300 sm:text-md",autofocus:"true"},null,512),[[j,l(t).name]])]),e("div",_s,[ps,k(e("input",{type:"number",step:"0.01",min:"0",id:"form_amount",placeholder:"Ex: R$ 123,45","onUpdate:modelValue":y[1]||(y[1]=g=>l(t).amount=g),class:"w-full border-slate-300 sm:text-md"},null,512),[[j,l(t).amount]])]),e("div",vs,[v(D,{type:"button",class:w(["ml-4",{"opacity-25":l(t).processing}]),disabled:l(t).processing,onClick:_},{default:$(()=>[C(" Cancelar ")]),_:1},8,["class","disabled"]),v(B,{class:w(["ml-4",{"opacity-25":l(t).processing}]),disabled:l(t).processing},{default:$(()=>[C(" Cadastrar ")]),_:1},8,["class","disabled"])])])])],40,is)]),_:1})],64))}},ys={class:"flex-col-config mb-5 bg-stone-100 py-5 font-mono text-red-700"},gs=e("p",{class:"text-4xl"},"Despesas",-1),fs={class:"text-xl"},bs={key:0,class:"mt-10 overflow-auto"},hs={class:"w-full m-auto table-auto truncate"},$s={class:"lg:border-b-2 lg:border-gray-500"},ws=e("th",null,"Nome",-1),ks=e("th",null,"Valor",-1),Cs={key:0},Os={key:1},js=["title"],Ss={class:"py-3 px-5 truncate"},Ms=["title","onClick"],Vs=["title","onClick"],Is={key:1,class:"w-full text-center"},Es=e("p",null,"Não há despesas cadastradas no momento!",-1),Ns=[Es],Ps=e("span",null,"Cadastrar despesa",-1),Us={__name:"FinancialExpenses",props:{ceremony:Object,budget:Object,expenses:Object},setup(s){const n=s,o=f(!1),t=f({name:"",amount:0}),_=f(0),u=y=>{y?(t.value.name=y,t.value.amount=n.expenses[y],_.value=1):(t.value.name="",t.value.amount=0,_.value=0),o.value=!0},x=y=>{_.value=2,E.put(route("ceremonies.update.expense",n.ceremony.id),{name:y,amount:n.expenses[y],op_type:_.value},{preserveScroll:!0})};return(y,g)=>(d(),c(S,null,[e("div",ys,[gs,e("p",fs,p(l(h)(s.ceremony.total_expenses)),1)]),Object.values(s.expenses).length?(d(),c("div",bs,[e("table",hs,[e("thead",$s,[ws,ks,s.budget.status==1||s.budget.status==2?(d(),c("th",Cs,"Editar")):b("",!0),s.budget.status==1||s.budget.status==2?(d(),c("th",Os,"Excluir")):b("",!0)]),e("tbody",null,[(d(!0),c(S,null,N(s.expenses,(r,a,m=0)=>(d(),c("tr",{key:a,class:w(["lg:border-b-2 lg-border-gray-100 hover:bg-gray-200 text-center",{"bg-gray-100":m++%2==0}])},[e("td",{class:"py-3 px-5 truncate",title:a},p(a),9,js),e("td",Ss,p(l(h)(r)),1),s.budget.status==1||s.budget.status==2?(d(),c("td",{key:0,class:"py-3 px-5 cursor-pointer",title:"Editar "+a,onClick:i=>u(a)},[v(l(q),{class:"w-full h-6 text-stone-500"})],8,Ms)):b("",!0),s.budget.status==1||s.budget.status==2?(d(),c("td",{key:1,class:"py-3 px-5 cursor-pointer",title:"Excluir "+a,onClick:i=>x(a)},[v(l(F),{class:"w-full h-6 text-stone-500"})],8,Vs)):b("",!0)],2))),128))])])])):(d(),c("div",Is,Ns)),s.budget.status==1&&s.budget.status==2?(d(),c("p",{key:2,class:"text-blue-400 hover:text-blue-600 active:text-blue-800 cursor-pointer flex-row-config space-x-1 py-5",onClick:g[0]||(g[0]=r=>u(null))},[v(l(J),{class:"w-4 h-4"}),Ps])):b("",!0),o.value?(d(),I(xs,{key:3,ceremony_id:s.ceremony.id,expense:t.value,op_type:_.value,onModal_open:g[1]||(g[1]=r=>o.value=r)},null,8,["ceremony_id","expense","op_type"])):b("",!0)],64))}},Ds={class:"w-11/12 m-auto px-0 rounded-xl shadow-2xl min-h-[525px] my-10 bg-white select-none overflow-hidden"},Fs={class:"w-full min-h-[10px] bg-gray-900"},Rs={class:"w-full bg-stone-700 text-white flex-row-config space-x-5 text-2xl py-5"},Ts=e("p",null,"Excedente:",-1),Bs={class:"inline-flex"},As={class:"m-5 rounded-md border-2 border-stone-100"},zs={class:"flex-col-config mb-5 bg-stone-100 py-5 font-mono text-yellow-700"},qs=e("p",{class:"text-4xl"},"Parcelas",-1),Js={class:"text-xl"},Ks={key:0,class:"text-center"},Xs={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 m-5"},Ls=["onClick"],Gs={class:"p-2 w-full flex flex-col space-y-2"},Hs={class:"text-xl text-gray-900"},Qs={class:"text-xs text-gray-700"},Ws={class:"text-lg text-gray-900"},Ys={class:"text-sm text-gray-500"},Zs={key:0,class:"text-xs text-gray-400"},ea={key:2,class:"w-full flex-row-config"},ta={class:"mx-10"},sa=e("label",{for:"obs",class:"text-xs text-slate-700"},"Observações",-1),aa=["rows"],la={class:"m-5 rounded-md border-2 border-stone-100"},oa={class:"m-5 rounded-md border-2 border-stone-100"},na={__name:"Financial",props:{ceremony:Object,budget:Object,installments:Object,additions:Object,expenses:Object},setup(s){const n=s,o=f(!1),t=f(!1),_=f({}),u=f({}),x=f(n.ceremony.observations||""),y=f(x.value.split(`
`).length||1),g=a=>{n.budget.status==1&&(_.value=a,K.get(route("get-vouchers",a.id)).then(m=>{console.log(m.data),u.value=m.data,t.value=!0}))},r=()=>{y.value=x.value.split(`
`).length||1,E.put(route("ceremonies.updade.obs",n.ceremony.id),{obs:x.value},{preserveScroll:!0})};return(a,m)=>(d(),c("section",Ds,[e("div",Fs,[v(Y,{ceremony:s.ceremony,budget:s.budget,button_type:1},null,8,["ceremony","budget"])]),e("div",Rs,[Ts,e("span",Bs,p(l(h)(s.ceremony.total_negotiated_amount+s.ceremony.total_additions-s.ceremony.total_expenses)),1)]),e("div",As,[e("div",zs,[qs,e("p",Js,p(l(h)(s.ceremony.total_installments)),1)]),s.installments.length?(d(),c("div",Xs,[(d(!0),c(S,null,N(s.installments,i=>(d(),c("div",{key:i.id,class:w(["bg-white border-2 group overflow-hidden border-gray-200 rounded-xl flex flex-row space-x-5 px-5 items-center align-middle",{"cursor-pointer hover:shadow-2xl active:shadow-none":s.budget.status==1}]),title:"Opções da Parcela",onClick:O=>g(i)},[v(l(z),{class:w(["w-10 h-10",{"text-green-500":i.paid,"text-gray-500":!i.paid}])},null,8,["class"]),e("div",Gs,[e("p",Hs,p(i.name),1),e("div",null,[e("p",Qs,"Restante: "+p(l(h)(i.total_amount-i.paid_amount)),1),e("p",Ws,p(l(h)(i.total_amount)),1)]),e("div",null,[e("p",Ys,p(l(V)(i.deadline).split(" ")[0]),1),i.entry?(d(),c("p",Zs,"Entrada")):b("",!0)])])],10,Ls))),128))])):(d(),c("div",Ks,"Não há parcelas cadastradas no momento")),s.budget.status==2?(d(),c("div",ea,[e("button",{class:"p-3 rounded-lg my-2 bg-stone-900 text-white text-lg",onClick:m[0]||(m[0]=i=>o.value=!0)},"Cadastrar parcelas")])):b("",!0)]),e("div",ta,[sa,k(e("textarea",{id:"obs",rows:y.value,"onUpdate:modelValue":m[1]||(m[1]=i=>x.value=i),placeholder:"Observações sobre a Cerimônia",class:"w-full border-slate-300 sm:text-md",onInput:r,autofocus:"true"},null,40,aa),[[j,x.value]])]),e("div",la,[v(ss,{ceremony:s.ceremony,budget:s.budget,first_installment:s.installments[1]||s.installments[0]||null,additions:s.additions},null,8,["ceremony","budget","first_installment","additions"])]),e("div",oa,[v(Us,{ceremony:s.ceremony,budget:s.budget,expenses:s.expenses},null,8,["ceremony","budget","expenses"])]),o.value?(d(),I(Ne,{key:0,ceremony:s.ceremony,budget:s.budget,onModal_open:m[2]||(m[2]=i=>o.value=i)},null,8,["ceremony","budget"])):b("",!0),t.value?(d(),I(wt,{key:1,ceremony:s.ceremony,installments:s.installments,installment:_.value,vouchers:u.value,onModal_open:m[3]||(m[3]=i=>t.value=i)},null,8,["ceremony","installments","installment","vouchers"])):b("",!0)]))}},da=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Orçamentos ",-1),xa={__name:"Financials",props:{submenu:Object,submenu_category:String,activated_page:Number,selected_client:Object,budget_list:Object,budget_selects_options:Object,budget:Object,ceremony:Object,installments:Object},setup(s){return(n,o)=>(d(),I(Q,{title:"Clientes",submenu:s.submenu,activated_page:s.activated_page,submenu_category:s.submenu_category},{header:$(()=>[da]),default:$(()=>[v(na,{budget:s.budget,ceremony:s.ceremony,installments:s.installments,additions:JSON.parse(s.ceremony.additions),expenses:JSON.parse(s.ceremony.expenses)},null,8,["budget","ceremony","installments","additions","expenses"])]),_:1},8,["submenu","activated_page","submenu_category"]))}};export{xa as default};
